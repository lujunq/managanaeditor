var BUILD="release";this.ciclope=this.ciclope||{};
(function(){var e=function(b){this.initialize(b)},a=e.prototype=new createjs.EventDispatcher;a.canvas=null;a.fps=30;a._ticker=null;a.stage=null;a.superInitialize=a.initialize;a.initialize=function(b){this.superInitialize();this.canvas=b;this.stage=new createjs.Stage(this.canvas);this.stage.mouseEventsEnabled=!0;createjs.Ticker.setFPS(30);createjs.Ticker.addListener(this.stage);this._ticker={};this._ticker.tick=this._onLoop.bind(this);createjs.Ticker.addListener(this._ticker,!1)};a.setFPS=function(b){createjs.Ticker.setFPS(b);
this.fps=b};a._onLoop=function(){this.dispatchEvent("loop")};ciclope.CiclopeJS=e})();this.ciclope=this.ciclope||{};
(function(){var e=function(){this.initialize()},a=e.prototype;a._isXML=!0;a._request=null;a._response=null;a.xml=null;a.responseText=null;Object.defineProperty(a,"responseText",{get:function(){return this._request.responseText}});a.responseXML=null;Object.defineProperty(a,"responseXML",{get:function(){return this._request.responseXML}});a.initialize=function(){this._request=new XMLHttpRequest;this._request.addEventListener("load",this._onFileLoad.bind(this));this.xml={}};a.load=function(b,a,d,e,f,
g){this._response=a;this._isXML=null==e?!0:e;a=f||"GET";e=!1;null!=d&&(e=d);e&&(b=b+"?rand="+randKey(5));killObj(this.xml);this._request.open(a,b);null==g?this._request.send(null):(this._request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this._request.send(g.join("&")))};a.kill=function(){this._request.removeEventListener("load",this._onFileLoad.bind(this));this._response=this._isXML=this._request=null;killObj(this.xml);this.xml=null;delete this.responseText;delete this.responseXML;
this.responseXML=this.responseText=null};a._onFileLoad=function(){4!=this._request.readyState||200!=this._request.status?null!=this._response&&this._response(!1):(this._isXML&&(this.xml=null!=this._request.responseXML?XML2jsobj(this._request.responseXML.documentElement):XML2jsobj((new DOMParser).parseFromString(this._request.responseText,"text/xml").documentElement)),null!=this._response&&this._response(!0),killObj(this.xml))};ciclope.URLLoader=e})();
function randKey(e){for(var a="",b=0;b<e;b++)a+=String.fromCharCode(65+Math.round(25*Math.random()));return a}
function XML2jsobj(e){function a(a,c){""==c&&(c=new String);b[a]?(b[a].constructor!=Array&&(b[a]=[b[a]]),b[a][b[a].length]=c):b[a]=c}var b={},c,d;for(c=0;d=e.attributes[c];c++)a(d.name,d.value);for(c=0;d=e.childNodes[c];c++)if(1==d.nodeType)if(1==d.childNodes.length&&3==d.firstChild.nodeType){if(a(d.nodeName,d.firstChild.nodeValue),0<d.attributes.length)for(var y=0;y<d.attributes.length;y++)a(d.nodeName+"_"+d.attributes[y].name,d.attributes[y].value)}else if(null!=d.firstChild?"#cdata-section"==d.firstChild.nodeName?
a(d.nodeName,d.firstChild.nodeValue):null!=d.childNodes[1]&&"#cdata-section"==d.childNodes[1].nodeName?a(d.nodeName,d.childNodes[1].nodeValue):a(d.nodeName,XML2jsobj(d)):a(d.nodeName,XML2jsobj(d)),0<d.attributes.length)for(y=0;y<d.attributes.length;y++)a(d.nodeName+"_"+d.attributes[y].name,d.attributes[y].value);return b}function killObj(e){for(var a in e)e[a].constructor!=String&&e[a].constructor!=Number&&killObj(e[a]),delete e[a]}
function xstr(e){return null==e||void 0==e?"":e.constructor!=String?"":e}function xbool(e){return null==e||void 0==e?!1:e.constructor!=String?!1:"1"==e||"true"==e?!0:!1}function xint(e){return null==e||void 0==e?0:e.constructor!=String?0:isNaN(parseInt(e))?0:parseInt(e)}function xcolor(e){return null==e||void 0==e?"#000000":e.constructor!=String?"#000000":0>e.indexOf("0x")?"#"+parseInt(e).toString(16):e.replace("0x","#")}
function xfloat(e){return null==e||void 0==e?0:e.constructor!=String?0:isNaN(parseFloat(e))?0:parseFloat(e)}function xdate(e){return new Date(xstr(e).trim())};this.ciclope=this.ciclope||{};
(function(){var e=function(){this.initialize()},a=e.prototype;a._picFiles=["png","jpg","gif","svg","swf"];a._vidFiles="mp4 flv f4v ogg ogv webm".split(" ");a._audFiles="mp3 wav ogg oga ogx spx opus webm wave".split(" ");a.initialize=function(){};a.fileExt=function(b){b=b.split(".");return 1<b.length?b[b.length-1]:""};a.fileType=function(b){var a="none";b=this.fileExt(b);-1<this._picFiles.indexOf(b)&&(a="picture");"none"==a&&-1<this._vidFiles.indexOf(b)&&(a="video");"none"==a&&-1<this._audFiles.indexOf(b)&&
(a="audio");return a};a.isPicture=function(b){return-1<this._picFiles.indexOf(this.fileExt(b))};a.isVideo=function(b){return-1<this._vidFiles.indexOf(this.fileExt(b))};a.isAudio=function(b){return-1<this._audFiles.indexOf(this.fileExt(b))};a.getPreferredPicture=function(b){"swf"==this.fileExt(b)&&(b=this.replaceExtension(b,"svg"));return b};a.getPreferredVideo=function(b,a){if("flv"==this.fileExt(b)||"f4v"==this.fileExt(b))b=this.replaceExtension(b,"mp4");a&&("probably"==a.mp4?b=this.replaceExtension(b,
"mp4"):"probably"==a.webm?b=this.replaceExtension(b,"webm"):"probably"==a.ogg&&(b=this.replaceExtension(b,"ogv")));return b};a.getPreferredAudio=function(b,a){a&&("probably"==a.mp3||"maybe"==a.mp3?b=this.replaceExtension(b,"mp3"):"probably"==a.ogg?b=this.replaceExtension(b,"ogg"):"probably"==a.webm?b=this.replaceExtension(b,"webm"):"probably"==a.wave&&(b=this.replaceExtension(b,"wav")));return b};a.replaceExtension=function(b,a){var d=this.fileExt(b);b=b.substring(0,b.length-d.length);return b+a};
a.kill=function(){this._audFiles=this._vidFiles=this._picFiles=null};a.toString=function(){return"[Object ciclope.FileChecker]"};ciclope.FileChecker=e})();this.ciclope=this.ciclope||{};
(function(){var e=function(){this.initialize()},a=e.prototype;a._content=null;a.initialize=function(){this._content={}};a.parse=function(b){this.clear();b=b.split(-1!=b.search("\n\r\n")?"\n\r\n":"\n\n");for(var a=0;a<b.length;a++)if(""!=b[a]){var d=b[a].split("\n");if(!isNaN(parseInt(d[0]))){var e=d[1].split(" --\x3e ");if(2==e.length){if(e[1].search("X1"!=-1)){var f=e[1].split(" ");e[1]=f[0]}if(!isNaN(this._timecodeToSeconds(e[0]))&&!isNaN(this._timecodeToSeconds(e[1]))){f=d[2];if(3<d.length)for(k=
3;k<d.length;k++)f=f+" "+d[k];this._content["t"+this._timecodeToSeconds(e[0])]=f;this._content["t"+this._timecodeToSeconds(e[1])]=""}}}}};a.clear=function(){for(var b in this._content)delete this._content[b]};a.getSubtitle=function(b){return void 0!=this._content["t"+b]?this._content["t"+b]:null};a.kill=function(){this.clear();this._content=null};a._timecodeToSeconds=function(b){b=b.replace(",",".");b=b.split(":");return Math.round(parseFloat(b[2])+60*parseInt(b[1])+3600*parseInt(b[0]))};ciclope.SubtitleParser=
e})();this.ciclope=this.ciclope||{};
(function(){var e=function(b,a,d,e,f){this.initialize(b,a,d,e,f)},a=e.prototype=new createjs.EventDispatcher;a.ready=!1;a.data=null;a.loader=null;a.name=null;a.xml=null;Object.defineProperty(a,"xml",{get:function(){return this.loader.xml}});a.superInitialize=a.initialize;a.initialize=function(b,a,d,e,f){this.superInitialize();this.name=e||"";d=d||"GET";null!=b&&""!=b?(this.ready=!1,this.loader=new ciclope.URLLoader,this.loader.load(b,this._onLoaderResponse.bind(this),!1,d,a)):(this.data=f,this.ready=
!0,this.dispatchEvent("finished"))};a.kill=function(){this.data=this.name=null;delete this.xml;this.xml=this.ready=null;null!=this.loader&&this.loader.kill();this.loader=null};a._onLoaderResponse=function(b){b?(this.data=this.loader.responseText,this.ready=!0,this.dispatchEvent("finished")):this.dispatchEvent("error");this.loader.kill();this.loader=null};ciclope.TextCache=e})();this.ciclope=this.ciclope||{};
(function(){var e=function(b,a,d){this.initialize(b,a,d)},a=e.prototype=new createjs.Container;a._img=null;a._bmp=null;a._width=-1;a._height=-1;a._src="";a._tempSrc="";a._time=-1;a._tInt=-1;a._mState="pause";a._file=null;a._totalTime=10;a._filters=null;a._cached=!1;a.volume=1;a.playOnLoad=!0;a.loop=!0;a.src=null;Object.defineProperty(a,"src",{get:function(){return this._src}});a.oWidth=null;Object.defineProperty(a,"oWidth",{get:function(){return this._img.width}});a.oHeight=null;Object.defineProperty(a,
"oHeight",{get:function(){return this._img.height}});a.width=0;Object.defineProperty(a,"width",{get:function(){return 0>this._width?0:this._width},set:function(b){this._width=b;this.scaleX=b/this._img.width}});a.height=0;Object.defineProperty(a,"height",{get:function(){return 0>this._height?0:this._height},set:function(b){this._height=b;this.scaleY=b/this._img.height}});a.time=0;Object.defineProperty(a,"time",{get:function(){return 0>this._time?0:this._time},set:function(b){this._time=b}});a.totalTime=
10;Object.defineProperty(a,"totalTime",{get:function(){return this._totalTime},set:function(b){this._totalTime=b}});a.mediaState="pause";Object.defineProperty(a,"mediaState",{get:function(){return this._mState},set:function(b){this._mState="play"==b?"play":"pause"}});a.superInitialize=a.initialize;a.initialize=function(b,a,d){this.superInitialize();this._img=new Image;this._img.addEventListener("load",this._onImageLoad.bind(this));this._img.addEventListener("error",this._onImageError.bind(this));
this._bmp=new createjs.Bitmap(this._img);this._file=new ciclope.FileChecker;this._cached=!1;a&&(this.width=a);d&&(this.height=d);b&&this.load(b);this.mediaState="pause";this._tInt=setInterval(this._onTime.bind(this),1E3)};a.load=function(b){return this._file.isPicture(b)&&(b=this.getPreferredFile(b),b!=this._src)?(this._tempSrc=b,this._img.src=b,!0):!1};a.getPreferredFile=function(b){return this._file.getPreferredPicture(b)};a.clearSrc=function(){this._src=""};a.toOriginalSize=function(){this.width=
this.oWidth;this.height=this.oHeight};a.play=function(){this.mediaState="play"};a.pause=function(){this.mediaState="pause"};a.stop=function(){this.mediaState="pause";this.seek(0)};a.seek=function(b){0<=this._time&&(this._time=b)};a.applyColor=function(b,a,d){this._filters=0!=b||0!=a||0!=d?[new createjs.ColorFilter(1,1,1,1,b,a,d,0)]:null;this._cached&&(this._bmp.filters=this._filters,this._bmp.updateCache())};a.kill=function(){this.removeAllChildren();this._img.removeEventListener("load",this._onImageLoad.bind(this));
this._img.removeEventListener("error",this._onImageError.bind(this));clearInterval(this._tInt);this._img=null;this._cached&&this._bmp.uncache();this._mState=this._tInt=this._time=this._tempSrc=this._src=this._height=this._width=this._bmp=null;this._file.kill();this._cached=this._filters=this.loop=this.playOnLoad=this.volume=this._totalTime=this._file=null;delete this.src;delete this.oWidth;delete this.oHeight;delete this.width;delete this.height;delete this.time;delete this.totalTime;delete this.mediaState;
this.superInitialize=null};a.toString=function(){return""==this._src?"[Object ciclope.GraphicSprite with no picture loaded]":"[Object ciclope.GraphicSprite loaded with "+this._src+"]"};a._onImageLoad=function(){0>this._width&&(this._width=this._img.width,this.scaleX=1);0>this._height&&(this._height=this._img.height,this.scaleY=1);this.width=this._width;this.height=this._height;this.removeAllChildren();this._cached&&this._bmp.uncache();this._cached=!1;-1==this._tempSrc.indexOf(".svg")&&(this._bmp.cache(0,
0,this._img.width,this._img.height),this._cached=!0);this._bmp.filters=this._filters;this.addChild(this._bmp);this._src=this._tempSrc;this._tempSrc="";this._time=0;this.playOnLoad&&(this.mediaState="play");this.dispatchEvent("load")};a._onImageError=function(){this.dispatchEvent("error")};a._onTime=function(){"play"==this.mediaState&&(this._time++,this._time>=this._totalTime?this.loop?(this.mediaState="play",this._time=0,this.dispatchEvent("loop")):(this.mediaState="pause",this._time=this._totalTime,
this.dispatchEvent("ended")):this.dispatchEvent("update"))};ciclope.GraphicSprite=e})();this.ciclope=this.ciclope||{};
(function(){var e=function(b,a,d){this.initialize(b,a,d)},a=e.prototype=new createjs.Container;a._vd=null;a._bmp=null;a._hit=null;a._width=-1;a._height=-1;a._src="";a._tempSrc="";a._mState="pause";a._file=null;a._canplay=!1;a._volume=1;a.playOnLoad=!0;a.loop=!0;a.src=null;Object.defineProperty(a,"src",{get:function(){return this._src}});a.oWidth=null;Object.defineProperty(a,"oWidth",{get:function(){return this._vd.videoWidth}});a.oHeight=null;Object.defineProperty(a,"oHeight",{get:function(){return this._vd.videoHeight}});
a.width=0;Object.defineProperty(a,"width",{get:function(){return 0>this._width?0:this._width},set:function(b){this._width=b;this.scaleX=b/this._vd.videoWidth}});a.height=0;Object.defineProperty(a,"height",{get:function(){return 0>this._height?0:this._height},set:function(b){this._height=b;this.scaleY=b/this._vd.videoHeight}});a.time=0;Object.defineProperty(a,"time",{get:function(){return 0==this._vd.readyState?0:this._vd.currentTime},set:function(b){0!=this._vd.readyState&&(this._vd.currentTime=b)}});
a.totalTime=10;Object.defineProperty(a,"totalTime",{get:function(){return 0==this._vd.readyState?0:this._vd.duration},set:function(b){}});a.volume=1;Object.defineProperty(a,"volume",{get:function(){return this._volume},set:function(b){0<=b&&1>=b&&(this._volume=b);0!=this._vd.readyState&&(this._vd.volume=this._volume)}});a.mediaState="pause";Object.defineProperty(a,"mediaState",{get:function(){return this._mState},set:function(b){0!=this._vd.readyState&&("play"==b?(this._mState="play",this._vd.play()):
(this._mState="pause",this._vd.pause()))}});a.superInitialize=a.initialize;a.initialize=function(b,a,d){this.superInitialize();this._vd=document.createElement("video");this._vd.addEventListener("loadeddata",this._onLoadedData.bind(this));this._vd.addEventListener("canplay",this._onCanPlay.bind(this));this._vd.addEventListener("error",this._onError.bind(this));this._vd.addEventListener("ended",this._onEnded.bind(this));this._vd.addEventListener("timeupdate",this._onTimeUpdate.bind(this));this._vd.volume=
this._volume;this._bmp=new createjs.Bitmap(this._vd);this.hitArea=this._hit=new createjs.Shape;this._file=new ciclope.FileChecker;a&&(this.width=a);d&&(this.height=d);b&&this.load(b)};a.load=function(b){return this._file.isVideo(b)&&(b=this.getPreferredFile(b),b!=this._src)?(this._tempSrc=b,this._canplay=!1,this._vd.src=b,!0):!1};a.getPreferredFile=function(b){return this._file.getPreferredVideo(b,{mp4:this._vd.canPlayType('video/mp4; codecs="avc1.4D401E, mp4a.40.2"'),ogg:this._vd.canPlayType('video/ogg; codecs="theora, vorbis"'),
webm:this._vd.canPlayType('video/webm; codecs="vp8.0, vorbis"')})};a.clearSrc=function(){this._src=""};a.toOriginalSize=function(){this.width=this.oWidth;this.height=this.oHeight};a.play=function(){this.mediaState="play";this._vd.play()};a.pause=function(){this.mediaState="pause";this._vd.pause()};a.stop=function(){this.mediaState="pause";this._vd.pause();this.seek(0)};a.seek=function(b){0!=this._vd.readyState&&(this._vd.currentTime=b)};a.kill=function(){this.removeAllChildren();this._vd.removeEventListener("loadeddata",
this._onLoadedData.bind(this));this._vd.removeEventListener("canplay",this._onCanPlay.bind(this));this._vd.removeEventListener("error",this._onError.bind(this));this._vd.removeEventListener("ended",this._onEnded.bind(this));this._vd.removeEventListener("timeupdate",this._onTimeUpdate.bind(this));this._bmp=this._vd=null;this._hit.graphics.clear();this._mState=this._tempSrc=this._src=this._height=this._width=this._hit=null;this._file.kill();this.loop=this.playOnLoad=this._volume=this._canplay=this._file=
null;delete this.src;delete this.oWidth;delete this.oHeight;delete this.width;delete this.height;delete this.time;delete this.totalTime;delete this.volume;delete this.mediaState;this.superInitialize=null};a.toString=function(){return""==this._src?"[Object ciclope.VideoSprite with no video loaded]":"[Object ciclope.VideoSprite loaded with "+this._src+"]"};a._onLoadedData=function(){0>this._width&&(this._width=this._vd.videoWidth,this.scaleX=1);0>this._height&&(this._height=this._vd.videoHeight,this.scaleY=
1);this.removeAllChildren();this.addChild(this._bmp);this._hit.graphics.beginFill("#000").drawRect(0,0,this._vd.videoWidth,this._vd.videoHeight);this._vd.volume=this._volume;this.width=this._width;this.height=this._height};a._onCanPlay=function(){this._canplay||(this._canplay=!0,this.playOnLoad?(this._vd.play(),this.mediaState="play"):(this._vd.pause(),this.mediaState="pause"),this._src=this._tempSrc,this._tempSrc="",this.dispatchEvent("load"))};a._onError=function(){this.dispatchEvent("error")};
a._onEnded=function(){this.loop?(this._vd.currentTime=0,this._vd.play(),this.mediaState="play",this.dispatchEvent("loop")):(this._vd.pause(),this.mediaState="pause",this.dispatchEvent("ended"))};a._onTimeUpdate=function(){this.dispatchEvent("update")};ciclope.VideoSprite=e})();this.ciclope=this.ciclope||{};
(function(){var e=function(b,a,d,e){this.initialize(b,a,d,e)},a=e.prototype=new createjs.Container;a._au=null;a._img=null;a._bmp=null;a._width=-1;a._height=-1;a._src="";a._tempSrc="";a._mState="pause";a._file=null;a._canplay=!1;a._volume=1;a.playOnLoad=!0;a.loop=!0;a.src=null;Object.defineProperty(a,"src",{get:function(){return this._src}});a.oWidth=null;Object.defineProperty(a,"oWidth",{get:function(){return""!=this._img.src?this._img.width:0}});a.oHeight=null;Object.defineProperty(a,"oHeight",{get:function(){return""!=
this._img.src?this._img.height:0}});a.width=0;Object.defineProperty(a,"width",{get:function(){return 0>this._width?0:this._width},set:function(b){this._width=b;this.scaleX=b/this._img.width}});a.height=0;Object.defineProperty(a,"height",{get:function(){return 0>this._height?0:this._height},set:function(b){this._height=b;this.scaleY=b/this._img.height}});a.time=0;Object.defineProperty(a,"time",{get:function(){return 0==this._au.readyState?0:this._au.currentTime},set:function(b){0!=this._au.readyState&&
(this._au.currentTime=b)}});a.totalTime=10;Object.defineProperty(a,"totalTime",{get:function(){return 0==this._au.readyState?0:this._au.duration},set:function(b){}});a.volume=1;Object.defineProperty(a,"volume",{get:function(){return this._volume},set:function(b){0<=b&&1>=b&&(this._volume=b);0!=this._au.readyState&&(this._au.volume=this._volume)}});a.mediaState="pause";Object.defineProperty(a,"mediaState",{get:function(){return this._mState},set:function(b){0!=this._au.readyState&&("play"==b?(this._mState=
"play",this._au.play()):(this._mState="pause",this._au.pause()))}});a.superInitialize=a.initialize;a.initialize=function(b,a,d,e){this.superInitialize();this._au=document.createElement("audio");this._au.addEventListener("loadeddata",this._onLoadedData.bind(this));this._au.addEventListener("canplay",this._onCanPlay.bind(this));this._au.addEventListener("error",this._onError.bind(this));this._au.addEventListener("ended",this._onEnded.bind(this));this._au.addEventListener("timeupdate",this._onTimeUpdate.bind(this));
this._au.volume=this._volume;this._img=new Image;this._img.addEventListener("load",this._onImageLoad.bind(this));this._img.addEventListener("error",this._onImageError.bind(this));this._bmp=new createjs.Bitmap(this._img);this._file=new ciclope.FileChecker;a&&(this.width=a);d&&(this.height=d);b&&this.load(b);e&&this.loadIcon(e)};a.load=function(b){return this._file.isAudio(b)&&(b=this.getPreferredFile(b),b!=this._src)?(this._tempSrc=b,this._canplay=!1,this._au.src=b,!0):!1};a.getPreferredFile=function(b){return this._file.getPreferredAudio(b,
{mp3:this._au.canPlayType("audio/mpeg"),ogg:this._au.canPlayType('audio/ogg; codecs="vorbis, theora"'),webm:this._au.canPlayType('audio/webm; codecs="vorbis"'),wave:this._au.canPlayType('audio/wave; codecs="pcm"')})};a.clearSrc=function(){this._src=""};a.loadIcon=function(b){if(this._file.isPicture(b))b=this._file.getPreferredPicture(b),this.removeAllChildren(),this._img.src=b;else return!1};a.toOriginalSize=function(){this.width=this.oWidth;this.height=this.oHeight};a.play=function(){this.mediaState=
"play";this._au.play()};a.pause=function(){this.mediaState="pause";this._au.pause()};a.stop=function(){this.mediaState="pause";this._au.pause();this.seek(0)};a.seek=function(b){0!=this._au.readyState&&(this._au.currentTime=b)};a.kill=function(){this.removeAllChildren();this._au.removeEventListener("loadeddata",this._onLoadedData.bind(this));this._au.removeEventListener("canplay",this._onCanPlay.bind(this));this._au.removeEventListener("error",this._onError.bind(this));this._au.removeEventListener("ended",
this._onEnded.bind(this));this._au.removeEventListener("timeupdate",this._onTimeUpdate.bind(this));this._img.removeEventListener("load",this._onImageLoad.bind(this));this._img.removeEventListener("error",this._onImageError.bind(this));this._mState=this._tempSrc=this._src=this._height=this._width=this._bmp=this._img=this._au=null;this._file.kill();this.loop=this.playOnLoad=this._volume=this._canplay=this._file=null;delete this.src;delete this.oWidth;delete this.oHeight;delete this.width;delete this.height;
delete this.time;delete this.totalTime;delete this.volume;delete this.mediaState;this.superInitialize=null};a.toString=function(){return""==this._src?"[Object ciclope.AudioSprite with no audio loaded]":"[Object ciclope.AudioSprite loaded with "+this._src+"]"};a._onLoadedData=function(){this._au.volume=this._volume};a._onCanPlay=function(){this._canplay||(this._canplay=!0,this.playOnLoad?(this._au.play(),this.mediaState="play"):(this._au.pause(),this.mediaState="pause"),this._src=this._tempSrc,this._tempSrc=
"",this.dispatchEvent("load"))};a._onError=function(){this.dispatchEvent("error")};a._onEnded=function(){this.loop?(this._au.currentTime=0,this._au.play(),this.mediaState="play",this.dispatchEvent("loop")):(this._au.pause(),this.mediaState="pause",this.dispatchEvent("ended"))};a._onTimeUpdate=function(){this.dispatchEvent("update")};a._onImageLoad=function(){0>this._width&&(this._width=this._img.width,this.scaleX=1);0>this._height&&(this._height=this._img.height,this.scaleY=1);this.width=this._width;
this.height=this._height;this.addChild(this._bmp)};a._onImageError=function(){};ciclope.AudioSprite=e})();this.ciclope=this.ciclope||{};
(function(){var e=function(b,a,d){this.initialize(b,a,d)},a=e.prototype=new createjs.Container;a._txt=null;a._mask=null;a._width=-1;a._height=-1;a._time=-1;a._tInt=-1;a._mState="pause";a._totalTime=10;a._font="Verdana";a._size=12;a._psize=12;a._pLineHeight=0;a._bold=!1;a._italic=!1;a._fontString="12px Verdana";a._mode="paragraph";a._color="#000000";a._red=0;a._green=0;a._blue=0;a.volume=1;a.playOnLoad=!0;a.loop=!0;a.src=null;Object.defineProperty(a,"src",{get:function(){return this._txt.text}});a.oWidth=
null;Object.defineProperty(a,"oWidth",{get:function(){return this._width}});a.oHeight=null;Object.defineProperty(a,"oHeight",{get:function(){return this._height}});a.fontString="50px Verdana";Object.defineProperty(a,"fontString",{get:function(){return this._fontString}});a.width=0;Object.defineProperty(a,"width",{get:function(){return 0>this._width?0:this._width},set:function(b){this._width=b;this._mask.graphics.clear();this._mask.graphics.beginFill("#000").drawRect(0,0,this._width,this._height);
"artistic"==this._mode?this._txt.scaleX=this._width/this._txt.getMeasuredWidth():(this._txt.lineWidth=b,this._adjustAlign(),this._txt.scaleX=1)}});a.height=0;Object.defineProperty(a,"height",{get:function(){return 0>this._height?0:this._height},set:function(b){this._height=b;this._mask.graphics.clear();this._mask.graphics.beginFill("#000").drawRect(0,0,this._width,this._height);this._txt.scaleY="artistic"==this._mode?this._height/this._txt.getMeasuredHeight():1}});a.time=0;Object.defineProperty(a,
"time",{get:function(){return 0>this._time?0:this._time},set:function(b){this._time=b}});a.totalTime=10;Object.defineProperty(a,"totalTime",{get:function(){return this._totalTime},set:function(b){this._totalTime=b}});a.mediaState="pause";Object.defineProperty(a,"mediaState",{get:function(){return this._mState},set:function(b){this._mState="play"==b?"play":"pause"}});a.font="Verdana";Object.defineProperty(a,"font",{get:function(){return this._font},set:function(b){this._font=b;this._applyFont()}});
a.size=12;Object.defineProperty(a,"size",{get:function(){return this._size},set:function(b){this._size=b;"paragraph"==this._mode&&(this._psize=b);this._applyFont()}});a.bold=!1;Object.defineProperty(a,"bold",{get:function(){return this._bold},set:function(b){this._bold=b;this._applyFont()}});a.italic=!1;Object.defineProperty(a,"italic",{get:function(){return this._italic},set:function(b){this._italic=b;this._applyFont()}});a.color="#000";Object.defineProperty(a,"color",{get:function(){return this._color},
set:function(b){this._color=b;hex=b.replace("#","");"0"==hex&&(hex="000000");b=/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(hex);null!=b&&(b=b.slice(1),red=parseInt(b[0],16)+this._red,255<red&&(red=255),green=parseInt(b[1],16)+this._green,255<green&&(green=255),blue=parseInt(b[2],16)+this._blue,255<blue&&(blue=255),red=red.toString(16),1==red.length&&(red="0"+red),green=green.toString(16),1==green.length&&(green="0"+green),blue=blue.toString(16),1==blue.length&&(blue="0"+blue),this._txt.color=
"#"+red+green+blue)}});a.align="left";Object.defineProperty(a,"align",{get:function(){return this._txt.textAlign},set:function(b){this._txt.textAlign="right"==b||"center"==b?b:"left";this._adjustAlign()}});a.lineHeight=0;Object.defineProperty(a,"lineHeight",{get:function(){return this._txt.lineHeight},set:function(b){this._pLineHeight=b;this._txt.lineHeight="paragraph"==this._mode?b:0}});a.mode="paragraph";Object.defineProperty(a,"mode",{get:function(){return this._mode},set:function(b){"artistic"==
b?this._setMode("artistic"):this._setMode("paragraph")}});a.superInitialize=a.initialize;a.initialize=function(b,a,d){this.superInitialize();this._txt=new createjs.Text;this._mask=new createjs.Shape;a&&(this._width=a);d&&(this._height=d);this._txt.lineWidth=this._width;this._adjustAlign();this._mask.graphics.beginFill("#000").drawRect(0,0,this._width,this._height);this.hitArea=this._txt.mask=this._mask;this._applyFont();this.addChild(this._txt);b&&(this._txt.text=b);this.mediaState="pause";this._tInt=
setInterval(this._onTime.bind(this),1E3)};a.load=function(b){this._txt.y=0;this._txt.text=b;this._setMode(this._mode);this._time=0;this.playOnLoad&&(this.mediaState="play");this.dispatchEvent("load");return!0};a.clearSrc=function(){this._txt.text=""};a.scrollUp=function(){"paragraph"==this._mode&&(this._txt.getMeasuredHeight()>this._height&&this._txt.getMeasuredHeight()+this._txt.y>this._height)&&(this._txt.y-=this._txt.getMeasuredLineHeight())};a.scrollDown=function(){"paragraph"==this._mode&&this._txt.getMeasuredHeight()>
this._height&&(0>this._txt.y&&(this._txt.y-=this._txt.getMeasuredLineHeight()),0<this._txt.y&&this._txt.y<this._txt.getMeasuredLineHeight()&&(this._txt.y=0))};a.scrollToBottom=function(){"paragraph"==this._mode&&this._txt.getMeasuredHeight()>this._height&&(this._txt.y=this._height-this._txt.getMeasuredHeight())};a.scrollToTop=function(){"paragraph"==this._mode&&this._txt.getMeasuredHeight()>this._height&&(this._txt.y=0)};a.toOriginalSize=function(){this.width=this.oWidth;this.height=this.oHeight};
a.play=function(){this.mediaState="play"};a.pause=function(){this.mediaState="pause"};a.stop=function(){this.mediaState="pause";this.seek(0)};a.seek=function(b){0<=this._time&&(this._time=b)};a.applyColor=function(b,a,d){this._red=b;this._green=a;this._blue=d;this.color=this._color};a.kill=function(){this.removeAllChildren();clearInterval(this._tInt);this._txt=null;this._mask.graphics.clear();this.playOnLoad=this.volume=this._blue=this._green=this._red=this._color=this._mode=this._fontString=this._italic=
this._bold=this._psize=this._size=this._font=this._totalTime=this._mState=this._tInt=this._time=this._height=this._width=this._mask=null;this.loop=!0;delete this.src;delete this.oWidth;delete this.oHeight;delete this.fontString;delete this.width;delete this.height;delete this.time;delete this.totalTime;delete this.mediaState;delete this.font;delete this.size;delete this.bold;delete this.italic;delete this.color;delete this.align;delete this.lineHeight;delete this.mode;this.superInitialize=null};a.toString=
function(){return""==this._src?"[Object ciclope.TextSprite with no picture loaded]":"[Object ciclope.TextSprite loaded with "+this._src+"]"};a._adjustAlign=function(){"left"==this._txt.textAlign?this._txt.x=0:"center"==this._txt.textAlign?this._txt.x=this._txt.lineWidth/2:"right"==this._txt.textAlign&&(this._txt.x=this._txt.lineWidth)};a._setMode=function(b){this._txt.y=0;"artistic"==b?(this._mode="artistic",this._txt.lineWidth=null,this._txt.lineHeight=0,this._applyFont()):(this._mode="paragraph",
this.size=this._psize,this._txt.lineHeight=this._pLineHeight);this.width=this._width;this.height=this._height};a._applyFont=function(){this._fontString="";this._bold&&!this._italic?this._fontString="bold ":this._bold&&this._italic?this._fontString="bold italic ":!this._bold&&this._italic&&(this._fontString="italic ");this._fontString="paragraph"==this._mode?this._fontString+this._size+"px "+this._font:this._fontString+"50px "+this._font;this._txt.font=this._fontString};a._onTime=function(){"play"==
this.mediaState&&(this._time++,this._time>=this._totalTime?this.loop?(this.mediaState="play",this._time=0,this.dispatchEvent("loop")):(this.mediaState="pause",this._time=this._totalTime,this.dispatchEvent("ended")):"play"==this.mediaState&&this.dispatchEvent("update"))};ciclope.TextSprite=e})();this.ciclope=this.ciclope||{};
(function(){var e=function(b,a,d,e,f){this.initialize(b,a,d,e,f)},a=e.prototype=new createjs.Container;a._gr=null;a._vd=null;a._au=null;a._tx=null;a._ref=null;a._file=null;a._type="none";a._temptype="none";a._hit=null;a._srtloader=null;a._srt=null;a._hasSrt=!1;a._upInterval=-1;a._subtext=null;a._subtextForce=null;a.src=null;Object.defineProperty(a,"src",{get:function(){return this._ref.src}});a.oWidth=null;Object.defineProperty(a,"oWidth",{get:function(){return this._ref.oWidth}});a.oHeight=null;
Object.defineProperty(a,"oHeight",{get:function(){return this._ref.oHeight}});a.type="none";Object.defineProperty(a,"type",{get:function(){return this._type}});a.width=0;Object.defineProperty(a,"width",{get:function(){return this._ref.width},set:function(b){this._gr.width=b;this._vd.width=Math.round(b);this._au.width=b;this._tx.width=b;this._hit.scaleX=b/100;this._subtext.lineWidth=b-20;this._subtext.x="center"==this.align?b/2:"right"==this.align?b-10:10;this._subtext.y=this.height-this._subtext.getMeasuredHeight()}});
a.height=0;Object.defineProperty(a,"height",{get:function(){return this._ref.height},set:function(b){this._gr.height=b;this._vd.height=b;this._au.height=b;this._tx.height=b;this._hit.scaleY=b/100}});a.time=0;Object.defineProperty(a,"time",{get:function(){return Math.round(this._ref.time)},set:function(b){this._ref.time=b}});a.totalTime=10;Object.defineProperty(a,"totalTime",{get:function(){return this._ref.totalTime},set:function(b){this._gr.totalTime=b;this._tx.totalTime=b}});a.mediaState="pause";
Object.defineProperty(a,"mediaState",{get:function(){return this._ref.mediaState},set:function(b){this._ref.mediaState=b}});a.volume=1;Object.defineProperty(a,"volume",{get:function(){return this._ref.volume},set:function(b){this._gr.volume=b;this._vd.volume=b;this._au.volume=b;this._tx.volume=b}});a.playOnLoad=!0;Object.defineProperty(a,"playOnLoad",{get:function(){return this._ref.playOnLoad},set:function(b){this._gr.playOnLoad=b;this._vd.playOnLoad=b;this._au.playOnLoad=b;this._tx.playOnLoad=b}});
a.loop=!0;Object.defineProperty(a,"loop",{get:function(){return this._ref.loop},set:function(b){this._gr.loop=b;this._vd.loop=b;this._au.loop=b;this._tx.loop=b}});a.subtitleVisible=!0;Object.defineProperty(a,"subtitleVisible",{get:function(){return this._subtext.visible},set:function(b){this._subtext.visible=b}});a.font="Verdana";Object.defineProperty(a,"font",{get:function(){return this._tx.font},set:function(b){this._tx.font=b;this._subtext.font=this._tx.fontString;this._subtext.y=this.height-this._subtext.getMeasuredHeight()}});
a.size=12;Object.defineProperty(a,"size",{get:function(){return this._tx.size},set:function(b){this._tx.size=b;this._subtext.font=this._tx.fontString;this._subtext.y=this.height-this._subtext.getMeasuredHeight()}});a.bold=!1;Object.defineProperty(a,"bold",{get:function(){return this._tx.bold},set:function(b){this._tx.bold=b;this._subtext.font=this._tx.fontString;this._subtext.y=this.height-this._subtext.getMeasuredHeight()}});a.italic=!1;Object.defineProperty(a,"italic",{get:function(){return this._tx.italic},
set:function(b){this._tx.italic=b;this._subtext.font=this._tx.fontString;this._subtext.y=this.height-this._subtext.getMeasuredHeight()}});a.color="#000";Object.defineProperty(a,"color",{get:function(){return this._tx.color},set:function(b){this._tx.color=b;this._subtext.color=b}});a.align="left";Object.defineProperty(a,"align",{get:function(){return this._tx.align},set:function(b){this._tx.align=b;this._subtext.textAlign=b;this._subtext.x="center"==b?this.width/2:"right"==b?this.width-10:10}});a.lineHeight=
0;Object.defineProperty(a,"lineHeight",{get:function(){return this._tx.lineHeight},set:function(b){this._tx.lineHeight=b;this._subtext.lineHeight=b}});a.mode="paragraph";Object.defineProperty(a,"mode",{get:function(){return this._tx.mode},set:function(b){this._tx.mode=b}});a.superInitialize=a.initialize;a.initialize=function(b,a,d,e,f){this.superInitialize();a=a||160;d=d||90;this._gr=new ciclope.GraphicSprite(null,a,d);this._vd=new ciclope.VideoSprite(null,a,d);this._au=new ciclope.AudioSprite(null,
a,d,f);this._tx=new ciclope.TextSprite(null,a,d);this._gr.addEventListener("load",this._onGraphicLoad.bind(this));this._gr.addEventListener("error",this._onGraphicError.bind(this));this._gr.addEventListener("loop",this._onGraphicLoop.bind(this));this._gr.addEventListener("ended",this._onGraphicEnded.bind(this));this._vd.addEventListener("load",this._onVideoLoad.bind(this));this._vd.addEventListener("error",this._onVideoError.bind(this));this._vd.addEventListener("loop",this._onVideoLoop.bind(this));
this._vd.addEventListener("ended",this._onVideoEnded.bind(this));this._au.addEventListener("load",this._onAudioLoad.bind(this));this._au.addEventListener("error",this._onAudioError.bind(this));this._au.addEventListener("loop",this._onAudioLoop.bind(this));this._au.addEventListener("ended",this._onAudioEnded.bind(this));this._tx.addEventListener("load",this._onTextLoad.bind(this));this._tx.addEventListener("loop",this._onTextLoop.bind(this));this._tx.addEventListener("ended",this._onTextEnded.bind(this));
this._file=new ciclope.FileChecker;null==e&&null!=b&&(e=_file.fileType(b));switch(e){case "video":this._type=e;this._ref=this._vd;break;case "audio":this._type=e;this._ref=this._au;break;case "text":this._type=e;this._ref=this._tx;break;default:this._type="picture",this._ref=this._gr}this.addChild(this._ref);this._temptype=this._type;this._hit=new createjs.Shape;this._hit.graphics.beginFill("#000").drawRect(0,0,100,100);this._hit.scaleX=a/100;this._hit.scaleY=d/100;this.hitArea=this._hit;this._srtloader=
new ciclope.URLLoader;this._srt=new ciclope.SubtitleParser;this._subtext=new createjs.Text;this._subtext.color=this._tx.color;this._subtext.font=this._tx.fontString;this._subtext.align=this._tx.align;this._subtext.x=10;this._subtext.lineWidth=a-20;this._subtext.shadow=new createjs.Shadow("#000000",1,1,1);b&&this._ref.load(b);this._upInterval=setInterval(this._onTimeUpdate.bind(this),1E3)};a.load=function(b,a){a=a||this._file.fileType(b);var d=!1;switch(a){case "picture":this._temptype=a;d=this._gr.load(b);
break;case "video":this._temptype=a;d=this._vd.load(b);break;case "audio":this._temptype=a;d=this._au.load(b);break;default:this._temptype="text",d=this._tx.load(b)}d&&(this._srt.clear(),null!=this._subtextForce?(this._subtext.text=this._subtextForce,this._subtext.y=this.height-this._subtext.getMeasuredHeight(),this._hasSrt||this.addChild(this._subtext)):(this._subtext.text="",this._hasSrt||this.removeChild(this._subtext)));return d};a.getPreferredFile=function(b,a){switch(a){case "picture":b=this._gr.getPreferredFile(b);
break;case "video":b=this._vd.getPreferredFile(b);break;case "audio":b=this._au.getPreferredFile(b)}return b};a.toOriginalSize=function(){this._ref.toOriginalSize();this._gr.width=this._ref.width;this._gr.height=this._ref.height;this._vd.width=this._ref.width;this._vd.height=this._ref.height;this._au.width=this._ref.width;this._au.height=this._ref.height;this._tx.width=this._ref.width;this._tx.height=this._ref.height};a.play=function(){this._ref.play()};a.pause=function(){this._ref.pause()};a.stop=
function(){this._ref.stop()};a.seek=function(b){this._ref.seek(b)};a.clearSrc=function(){this._vd.clearSrc();this._au.clearSrc();this._tx.clearSrc();this._gr.clearSrc()};a.setSubtitle=function(b){this._subtextForce=b;null==b?(this._subtext.text="",this._hasSrt||this.removeChild(this._subtext)):(this._subtext.text=this._subtextForce,this._subtext.y=this.height-this._subtext.getMeasuredHeight(),this._hasSrt||this.addChild(this._subtext))};a.scrollUp=function(){this._tx.scrollUp()};a.scrollDown=function(){this._tx.scrollDown()};
a.scrollToBottom=function(){this._tx.scrollToBottom()};a.scrollToTop=function(){this._tx.scrollToTop()};a.applyColor=function(b,a,d){this._gr.applyColor(b,a,d);this._tx.applyColor(b,a,d)};a.kill=function(){this.removeAllChildren();this._gr.removeEventListener("load",this._onGraphicLoad.bind(this));this._gr.removeEventListener("error",this._onGraphicError.bind(this));this._gr.removeEventListener("loop",this._onGraphicLoop.bind(this));this._gr.removeEventListener("ended",this._onGraphicEnded.bind(this));
this._vd.removeEventListener("load",this._onVideoLoad.bind(this));this._vd.removeEventListener("error",this._onVideoError.bind(this));this._vd.removeEventListener("loop",this._onVideoLoop.bind(this));this._vd.removeEventListener("ended",this._onVideoEnded.bind(this));this._au.removeEventListener("load",this._onAudioLoad.bind(this));this._au.removeEventListener("error",this._onAudioError.bind(this));this._au.removeEventListener("loop",this._onAudioLoop.bind(this));this._au.removeEventListener("ended",
this._onAudioEnded.bind(this));this._tx.removeEventListener("load",this._onTextLoad.bind(this));this._tx.removeEventListener("loop",this._onTextLoop.bind(this));this._tx.removeEventListener("ended",this._onTextEnded.bind(this));clearInterval(this._upInterval);this._gr.kill();this._gr=null;this._vd.kill();this._vd=null;this._au.kill();this._au=null;this._tx.kill();this._ref=this._tx=null;this._file.kill();this._temptype=this._type=this._file=null;this._hit.graphics.clear();this._hit=null;this._srtloader.kill();
this._srtloader=null;this._srt.kill();this._srt=null;this._hasSrt=!1;this._subtextForce=this._subtext=this._upInterval=null;delete this.src;delete this.oWidth;delete this.oHeight;delete this.type;delete this.width;delete this.height;delete this.time;delete this.totalTime;delete this.mediaState;delete this.volume;delete this.playOnLoad;delete this.loop;delete this.subtitleVisible;delete this.font;delete this.size;delete this.bold;delete this.italic;delete this.color;delete this.align;delete this.lineHeight;
delete this.mode;this.superInitialize=null};a.toString=function(){return""==this.src?"[Object ciclope.MediaSprite with no content loaded]":"[Object ciclope.MediaSprite loaded with "+this.src+"]"};a._onGraphicLoad=function(){"picture"==this._temptype&&(this._type=this._temptype,this._vd.stop(),this._au.stop(),this._tx.stop(),this._vd.clearSrc(),this._au.clearSrc(),this._tx.clearSrc(),this._ref=this._gr,this.removeAllChildren(),this.addChild(this._ref),this._temptype="",this._srtloader.load(this._file.replaceExtension(this._gr.src,
"srt"),this._onSubtitleLoad.bind(this),!1,!1,"GET"),this.dispatchEvent("load"))};a._onGraphicError=function(b){"picture"==this._temptype&&this.dispatchEvent("error")};a._onGraphicLoop=function(b){"picture"==this._type&&this.dispatchEvent("loop")};a._onGraphicEnded=function(b){"picture"==this._type&&this.dispatchEvent("ended")};a._onVideoLoad=function(b){"video"==this._temptype&&(this._type=this._temptype,this._gr.stop(),this._au.stop(),this._tx.stop(),this._gr.clearSrc(),this._au.clearSrc(),this._tx.clearSrc(),
this._ref=this._vd,this.removeAllChildren(),this.addChild(this._ref),this._srtloader.load(this._file.replaceExtension(this._vd.src,"srt"),this._onSubtitleLoad.bind(this),!1,!1,"GET"),this._temptype="",this.dispatchEvent("load"))};a._onVideoError=function(b){"video"==this._temptype&&this.dispatchEvent("error")};a._onVideoLoop=function(b){"video"==this._type&&this.dispatchEvent("loop")};a._onVideoEnded=function(b){"video"==this._type&&this.dispatchEvent("ended")};a._onAudioLoad=function(b){"audio"==
this._temptype&&(this._type=this._temptype,this._vd.stop(),this._gr.stop(),this._tx.stop(),this._vd.clearSrc(),this._gr.clearSrc(),this._tx.clearSrc(),this._ref=this._au,this.removeAllChildren(),this.addChild(this._ref),this._srtloader.load(this._file.replaceExtension(this._au.src,"srt"),this._onSubtitleLoad.bind(this),!1,!1,"GET"),this._temptype="",this.dispatchEvent("load"))};a._onAudioError=function(b){"audio"==this._temptype&&this.dispatchEvent("error")};a._onAudioLoop=function(b){"audio"==this._type&&
this.dispatchEvent("loop")};a._onAudioEnded=function(b){"audio"==this._type&&this.dispatchEvent("ended")};a._onTextLoad=function(b){"text"==this._temptype&&(this._type=this._temptype,this._vd.stop(),this._au.stop(),this._gr.stop(),this._vd.clearSrc(),this._au.clearSrc(),this._gr.clearSrc(),this._ref=this._tx,this.removeAllChildren(),this.addChild(this._ref),this._temptype="",this.dispatchEvent("load"))};a._onTextLoop=function(b){"text"==this._type&&this.dispatchEvent("loop")};a._onTextEnded=function(b){"text"==
this._type&&this.dispatchEvent("ended")};a._onTimeUpdate=function(){if("play"==this.mediaState){if(null!=this._subtextForce)this._subtext.text=this._subtextForce,this._subtext.y=this.height-this._subtext.getMeasuredHeight(),this._hasSrt||this.addChild(this._subtext);else if(this._hasSrt){var b=this._srt.getSubtitle(Math.floor(this._ref.time));null!=b&&(this._subtext.text=b,this._subtext.y=this.height-this._subtext.getMeasuredHeight())}this.dispatchEvent("update")}};a._onSubtitleLoad=function(b){b?
(this._hasSrt=!0,this.addChild(this._subtext),this._srt.parse(this._srtloader.responseText)):(this._hasSrt=!1,this._srt.clear())};ciclope.MediaSprite=e})();function zSort(e){null!=e&&null!=e.children&&0<e.children.length&&e.children.sort(function(a,b){return 1E3*-a.pz+a.order-(1E3*-b.pz+b.order)})}function noSpecial(e){e=e.trim();for(var a="",b=0;b<e.length;b++)a=" "==e.charAt(b)?a+"_":"."==e.charAt(b)?a+".":e.charAt(b)==encodeURIComponent(e.charAt(b))?a+e.charAt(b):a+"_";return a}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var a=Array.prototype.slice.call(arguments,1),b=this,c=function(){},d=function(){return b.apply(this instanceof c&&e?this:e,a.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;d.prototype=new c;return d});this.managana=this.managana||{};
(function(){var e=function(b,a){this.initialize(b,a)},a=e.prototype;a.id=null;a.time=10;a.type=null;a.end=null;a.fformat=null;a.flang=null;a.fabsolute=!1;a.ffeed=null;a.ffeedtype=null;a.ffeedfield=null;a.file=null;a.endAction=null;a.order=-1;a.actions=null;a.initialize=function(b,a){if(0>b)if(this.id=xstr(a.element_id),this.time=xint(a.element_time),this.type=xstr(a.element_type),this.end=xstr(a.element_end),this.fformat=xstr(a.element.file_format),this.flang=xstr(a.element.file_lang),this.fabsolute=
xbool(a.element.file_absolute),this.ffeed=xstr(a.element.file_feed),this.ffeedtype=xstr(a.element.file_feedType),this.ffeedfield=xstr(a.element.file_field),this.file=xstr(a.element.file),this.endAction="",this.order=0,this.actions=[],a.element.action.constructor==String)"end"==xstr(a.element.action_type)?this.endAction=xstr(a.element.action):this.actions["t"+a.element.action_time]={type:xstr(a.element.action_type),code:xstr(a.element.action)};else for(var d=0;d<a.element.action.length;d++)"end"==
xstr(a.element.action_type[d])?this.endAction=xstr(a.element.action[d]):this.actions["t"+a.element.action_time[d]]={type:xstr(a.element.action_type[d]),code:xstr(a.element.action[d])};else if(this.id=xstr(a.element_id[b]),this.time=xint(a.element_time[b]),this.type=xstr(a.element_type[b]),this.end=xstr(a.element_end[b]),this.fformat=xstr(a.element[b].file_format),this.flang=xstr(a.element[b].file_lang),this.fabsolute=xbool(a.element[b].file_absolute),this.ffeed=xstr(a.element[b].file_feed),this.ffeedtype=
xstr(a.element[b].file_feedType),this.ffeedfield=xstr(a.element[b].file_field),this.file=xstr(a.element[b].file),this.endAction="",this.order=b,this.actions=[],a.element[b].action.constructor==String)"end"==xstr(a.element[b].action_type)?this.endAction=xstr(a.element[b].action):this.actions["t"+a.element[b].action_time]={type:xstr(a.element[b].action_type),code:xstr(a.element[b].action)};else for(d=0;d<a.element[b].action.length;d++)"end"==xstr(a.element[b].action_type[d])?this.endAction=xstr(a.element[b].action[d]):
this.actions["t"+a.element[b].action_time[d]]={type:xstr(a.element[b].action_type[d]),code:xstr(a.element[b].action[d])}};a.kill=function(){this.file=this.ffeedfield=this.ffeedtype=this.ffeed=this.fabsolute=this.flang=this.fformat=this.end=this.type=this.time=this.id=null;for(var b in this.actions)this.actions[b].type=null,this.actions[b].code=null,delete this.actions[b];this.actions=this.endAction=null};managana.DISElement=e})();this.managana=this.managana||{};
(function(){var e=function(b,a){this.initialize(b,a)},a=e.prototype;a.index=0;a.actionin=null;a.actionout=null;a.instances=null;a.initialize=function(b,a){this.index=b;this.actionin=xstr(a.actionin);this.actionout=xstr(a.actionout);this.instances=[];if(a.instance instanceof Array)for(var d=0;d<a.instance_id.length;d++)void 0==a.instance_cssclass?this.instances.push(new managana.DISInstance(a.instance_playlist[d],a.instance_id[d],a.instance_element[d],a.instance_force[d],a.instance_width[d],a.instance_height[d],
a.instance_px[d],a.instance_py[d],a.instance_pz[d],a.instance_order[d],a.instance_alpha[d],a.instance_play[d],a.instance_volume[d],a.instance_rx[d],a.instance_ry[d],a.instance_rz[d],a.instance_active[d],a.instance_visible[d],a.instance_red[d],a.instance_green[d],a.instance_blue[d],a.instance_blend[d],a.instance_DropShadowFilter[d],a.instance_DSFalpha[d],a.instance_DSFangle[d],a.instance_DSFblurX[d],a.instance_DSFblurY[d],a.instance_DSFdistance[d],a.instance_BevelFilter[d],a.instance_BVFangle[d],a.instance_BVFblurX[d],
a.instance_BVFblurY[d],a.instance_BVFdistance[d],a.instance_BVFhighlightAlpha[d],a.instance_BVFshadowAlpha[d],a.instance_BlurFilter[d],a.instance_BLFblurX[d],a.instance_BLFblurY[d],a.instance_GlowFilter[d],a.instance_GLFalpha[d],a.instance_GLFblurX[d],a.instance_GLFblurY[d],a.instance_GLFinner[d],a.instance_GLFstrength[d],a.instance_DSFcolor[d],a.instance_BVFhighlightColor[d],a.instance_BVFshadowColor[d],a.instance_GLFcolor[d],a.instance_crop[d],a.instance_smooth[d],a.instance_font[d],a.instance_fontsize[d],
a.instance_spacing[d],a.instance_leading[d],a.instance_bold[d],a.instance_italic[d],a.instance_charmax[d],a.instance_fontcolor[d],"left","",a.instance_transition[d],a.instance[d])):this.instances.push(new managana.DISInstance(a.instance_playlist[d],a.instance_id[d],a.instance_element[d],a.instance_force[d],a.instance_width[d],a.instance_height[d],a.instance_px[d],a.instance_py[d],a.instance_pz[d],a.instance_order[d],a.instance_alpha[d],a.instance_play[d],a.instance_volume[d],a.instance_rx[d],a.instance_ry[d],
a.instance_rz[d],a.instance_active[d],a.instance_visible[d],a.instance_red[d],a.instance_green[d],a.instance_blue[d],a.instance_blend[d],a.instance_DropShadowFilter[d],a.instance_DSFalpha[d],a.instance_DSFangle[d],a.instance_DSFblurX[d],a.instance_DSFblurY[d],a.instance_DSFdistance[d],a.instance_BevelFilter[d],a.instance_BVFangle[d],a.instance_BVFblurX[d],a.instance_BVFblurY[d],a.instance_BVFdistance[d],a.instance_BVFhighlightAlpha[d],a.instance_BVFshadowAlpha[d],a.instance_BlurFilter[d],a.instance_BLFblurX[d],
a.instance_BLFblurY[d],a.instance_GlowFilter[d],a.instance_GLFalpha[d],a.instance_GLFblurX[d],a.instance_GLFblurY[d],a.instance_GLFinner[d],a.instance_GLFstrength[d],a.instance_DSFcolor[d],a.instance_BVFhighlightColor[d],a.instance_BVFshadowColor[d],a.instance_GLFcolor[d],a.instance_crop[d],a.instance_smooth[d],a.instance_font[d],a.instance_fontsize[d],a.instance_spacing[d],a.instance_leading[d],a.instance_bold[d],a.instance_italic[d],a.instance_charmax[d],a.instance_fontcolor[d],a.instance_textalign[d],
a.instance_cssclass[d],a.instance_transition[d],a.instance[d]));else void 0==a.instance_cssclass?this.instances.push(new managana.DISInstance(a.instance_playlist,a.instance_id,a.instance_element,a.instance_force,a.instance_width,a.instance_height,a.instance_px,a.instance_py,a.instance_pz,a.instance_order,a.instance_alpha,a.instance_play,a.instance_volume,a.instance_rx,a.instance_ry,a.instance_rz,a.instance_active,a.instance_visible,a.instance_red,a.instance_green,a.instance_blue,a.instance_blend,
a.instance_DropShadowFilter,a.instance_DSFalpha,a.instance_DSFangle,a.instance_DSFblurX,a.instance_DSFblurY,a.instance_DSFdistance,a.instance_BevelFilter,a.instance_BVFangle,a.instance_BVFblurX,a.instance_BVFblurY,a.instance_BVFdistance,a.instance_BVFhighlightAlpha,a.instance_BVFshadowAlpha,a.instance_BlurFilter,a.instance_BLFblurX,a.instance_BLFblurY,a.instance_GlowFilter,a.instance_GLFalpha,a.instance_GLFblurX,a.instance_GLFblurY,a.instance_GLFinner,a.instance_GLFstrength,a.instance_DSFcolor,a.instance_BVFhighlightColor,
a.instance_BVFshadowColor,a.instance_GLFcolor,a.instance_crop,a.instance_smooth,a.instance_font,a.instance_fontsize,a.instance_spacing,a.instance_leading,a.instance_bold,a.instance_italic,a.instance_charmax,a.instance_fontcolor,"left","",a.instance_transition,a.instance)):this.instances.push(new managana.DISInstance(a.instance_playlist,a.instance_id,a.instance_element,a.instance_force,a.instance_width,a.instance_height,a.instance_px,a.instance_py,a.instance_pz,a.instance_order,a.instance_alpha,a.instance_play,
a.instance_volume,a.instance_rx,a.instance_ry,a.instance_rz,a.instance_active,a.instance_visible,a.instance_red,a.instance_green,a.instance_blue,a.instance_blend,a.instance_DropShadowFilter,a.instance_DSFalpha,a.instance_DSFangle,a.instance_DSFblurX,a.instance_DSFblurY,a.instance_DSFdistance,a.instance_BevelFilter,a.instance_BVFangle,a.instance_BVFblurX,a.instance_BVFblurY,a.instance_BVFdistance,a.instance_BVFhighlightAlpha,a.instance_BVFshadowAlpha,a.instance_BlurFilter,a.instance_BLFblurX,a.instance_BLFblurY,
a.instance_GlowFilter,a.instance_GLFalpha,a.instance_GLFblurX,a.instance_GLFblurY,a.instance_GLFinner,a.instance_GLFstrength,a.instance_DSFcolor,a.instance_BVFhighlightColor,a.instance_BVFshadowColor,a.instance_GLFcolor,a.instance_crop,a.instance_smooth,a.instance_font,a.instance_fontsize,a.instance_spacing,a.instance_leading,a.instance_bold,a.instance_italic,a.instance_charmax,a.instance_fontcolor,a.instance_textalign,a.instance_cssclass,a.instance_transition,a.instance))};a.kill=function(){for(this.actionout=
this.actionin=this.index=null;0<this.instances.length;)this.instances[0].kill(),this.instances.shift()};managana.DISKeyframe=e})();this.managana=this.managana||{};
(function(){var e=function(b,a,d,e,f,g,h,l,m,n,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){this.initialize(b,a,d,e,f,g,h,l,m,n,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa)},a=e.prototype;a.playlist=null;a.id=null;a.element=null;a.force=!0;a.width=0;a.height=0;a.px=0;a.py=0;a.pz=0;a.order=0;a.alpha=1;a.play=!0;a.volume=1;a.rx=0;a.ry=0;a.rz=0;a.active=
!0;a.visible=!0;a.red=0;a.green=0;a.blue=0;a.blend=null;a.DropShadowFilter=!1;a.DSFalpha=0;a.DSFangle=0;a.DSFblurX=0;a.DSFblurY=0;a.DSFdistance=0;a.BevelFilter=!1;a.BVFangle=0;a.BVFblurX=0;a.BVFblurY=0;a.BVFdistance=0;a.BVFhighlightAlpha=0;a.BVFshadowAlpha=0;a.BlurFilter=!1;a.BLFblurX=0;a.BLFblurY=0;a.GlowFilter=!1;a.GLFalpha=0;a.GLFblurX=0;a.GLFblurY=0;a.GLFinner=!1;a.GLFstrength=0;a.DSFcolor=null;a.BVFhighlightColor=null;a.BVFshadowColor=null;a.GLFcolor=null;a.crop=null;a.smooth=!1;a.font=null;
a.fontsize=12;a.spacing=0;a.leading=null;a.bold=!1;a.italic=!1;a.charmax=0;a.fontcolor=null;a.textalign=null;a.cssclass=null;a.transition=null;a.action=null;a.initialize=function(b,a,d,e,f,g,h,l,m,n,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){this.playlist=xstr(b);this.id=xstr(a);this.element=xstr(d);this.force=xbool(e);this.width=xint(f);this.height=xint(g);this.px=xint(h);this.py=xint(l);this.pz=xint(m);this.order=xint(n);
this.alpha=xfloat(p);this.play=xbool(q);this.volume=xfloat(r);this.rx=xint(s);this.ry=xint(t);this.rz=xint(u);this.active=xbool(v);this.visible=xbool(w);this.red=xint(x);this.green=xint(z);this.blue=xint(A);this.blend=xstr(B);this.DropShadowFilter=xbool(C);this.DSFalpha=xfloat(D);this.DSFangle=xint(E);this.DSFblurX=xint(F);this.DSFblurY=xint(G);this.DSFdistance=xint(H);this.BevelFilter=xbool(I);this.BVFangle=xint(J);this.BVFblurX=xint(K);this.BVFblurY=xint(L);this.BVFdistance=xint(M);this.BVFhighlightAlpha=
xfloat(N);this.BVFshadowAlpha=xfloat(O);this.BlurFilter=xbool(P);this.BLFblurX=xint(Q);this.BLFblurY=xint(R);this.GlowFilter=xbool(S);this.GLFalpha=xfloat(T);this.GLFblurX=xint(U);this.GLFblurY=xint(V);this.GLFinner=xbool(W);this.GLFstrength=xint(X);this.DSFcolor=xcolor(Y);this.BVFhighlightColor=xcolor(Z);this.BVFshadowColor=xcolor($);this.GLFcolor=xcolor(aa);this.crop=xstr(ba);this.smooth=xbool(ca);this.font=xstr(da);this.fontsize=xint(ea);this.spacing=xint(fa);this.leading=xint(ga);this.bold=xbool(ha);
this.italic=xbool(ia);this.charmax=xfloat(ja);this.fontcolor=xcolor(ka);this.textalign=xstr(la);this.cssclass=xstr(ma);this.transition=xstr(na);this.action=xstr(oa)};a.kill=function(){this.action=this.transition=this.cssclass=this.textalign=this.fontcolor=this.charmax=this.italic=this.bold=this.leading=this.spacing=this.fontsize=this.font=this.smooth=this.crop=this.GLFcolor=this.BVFshadowColor=this.BVFhighlightColor=this.DSFcolor=this.GLFstrength=this.GLFinner=this.GLFblurY=this.GLFblurX=this.GLFalpha=
this.GlowFilter=this.BLFblurY=this.BLFblurX=this.BlurFilter=this.BVFshadowAlpha=this.BVFhighlightAlpha=this.BVFdistance=this.BVFblurY=this.BVFblurX=this.BVFangle=this.BevelFilter=this.DSFdistance=this.DSFblurY=this.DSFblurX=this.DSFangle=this.DSFalpha=this.DropShadowFilter=this.blend=this.blue=this.green=this.red=this.visible=this.active=this.rz=this.ry=this.rx=this.volume=this.play=this.alpha=this.order=this.pz=this.py=this.px=this.height=this.width=this.force=this.element=this.id=this.playlist=
null};managana.DISInstance=e})();this.managana=this.managana||{};
(function(){var e=function(b,a){this.initialize(b,a)},a=e.prototype=new createjs.EventDispatcher;a._loader=null;a.id=null;a.path=null;a.title=null;a.author=null;a.elements=null;a.order=null;a.ready=!1;a.superInitialize=a.initialize;a.initialize=function(b,a){this.superInitialize();this.id=b;this.path=a;this.elements=[];this.order=[];this.ready=!1;this._loader=new ciclope.URLLoader;this._loader.load(this.path+b+".xml",this._onFileLoad.bind(this),!0,!0,"GET")};a.getElement=function(b){return null!=
this.elements?this.elements[b]:null};a.getNextElement=function(b){b=this.elements[b].order+1;b>=this.order.length&&(b=0);return this.order[b]};a.getPreviousElement=function(b){b=this.elements[b].order-1;0>b&&(b=this.order.length-1);return this.order[b]};a.kill=function(){this.ready=this.author=this.title=this.path=this.id=null;for(var b in this.elements)this.elements[b].kill(),delete this.elements[b];for(;0<this.order.length;)this.order.shift();this.order=null};a._onFileLoad=function(b){if(b){b=this._loader.xml;
this.title=xstr(b.meta.title);this.author=xstr(b.meta.author);if(b.elements.element instanceof Array)for(var a=0;a<b.elements.element.length;a++)this.elements[b.elements.element_id[a]]=new managana.DISElement(a,b.elements),this.order.push(b.elements.element_id[a]);else this.elements[b.elements.element_id]=new managana.DISElement(-1,b.elements),this.order.push(b.elements.element_id);this.ready=!0;this.dispatchEvent("load")}else this.ready=!1,this.dispatchEvent("error");this._loader.kill();this._loader=
null};managana.DISPlaylist=e})();this.managana=this.managana||{};
(function(){var e=function(b,a,d){this.initialize(b,a,d)},a=e.prototype=new createjs.EventDispatcher;a._loader=null;a.level=null;a.plCall=null;a.getInstance=null;a.id=null;a.title=null;a.author=null;a.about=null;a.tags=null;a.meta=null;a.update=null;a.category=null;a.guides=null;a.navigation=null;a.speed=1;a.tweening=null;a.fade=null;a.entropy=0;a.distortion=0;a.votetype=null;a.votereference=null;a.voteoptions=null;a.landscape=null;a.portrait=null;a.aspect="landscape";a.ipcode=null;a.customA=null;
a.customB=null;a.customC=null;a.customD=null;a.mousup=null;a.mousedown=null;a.votedefault=0;a.startaftervote=!1;a.remoteid=null;a.state=null;a.path=null;a.keyframes=null;a.numKeyframes=0;Object.defineProperty(a,"numKeyframes",{get:function(){return this.keyframes.length}});a.superInitialize=a.initialize;a.initialize=function(b,a,d){this.superInitialize();this._loader=new ciclope.URLLoader;this.level=b;this.plCall=a;this.getInstance=d;this.state="notready";this.meta=[];this.guides=[];this.guides.up=
"";this.guides.down="";this.navigation=[];this.navigation.xnext="";this.navigation.ynext="";this.navigation.znext="";this.navigation.xprev="";this.navigation.yprev="";this.navigation.zprev="";this.voteoptions=[];this.voteoptions.v1={id:1,px:0,py:0,show:!1,code:""};this.voteoptions.v2={id:2,px:0,py:0,show:!1,code:""};this.voteoptions.v3={id:3,px:0,py:0,show:!1,code:""};this.voteoptions.v4={id:4,px:0,py:0,show:!1,code:""};this.voteoptions.v5={id:5,px:0,py:0,show:!1,code:""};this.voteoptions.v6={id:6,
px:0,py:0,show:!1,code:""};this.voteoptions.v7={id:7,px:0,py:0,show:!1,code:""};this.voteoptions.v8={id:8,px:0,py:0,show:!1,code:""};this.voteoptions.v9={id:9,px:0,py:0,show:!1,code:""};this.keyframes=[]};a.load=function(b){return b!=this.id?(this.state="loading",this._loader.load(this.path+b+".xml",this._onFileLoad.bind(this),!0,!0,"GET"),!0):!1};a.clear=function(b){this.tryid=this.id="";this.path=b};a.setAspect=function(b){};a._onFileLoad=function(b){if(b){b=this._loader.xml;this.id=xstr(b.id);
this.title=xstr(b.meta.title);this.about=xstr(b.meta.about);this.tags=xstr(b.meta.tags);this.update=new Date(b.meta.update);this.category=xstr(b.meta.category);this.ipcode=xstr(b.code);this.remoteid=void 0!=b.remote?xstr(b.remote.alternateid):this.id;void 0!=b.functions?(this.customA=xstr(b.functions.customa),this.customB=xstr(b.functions.customb),this.customC=xstr(b.functions.customc),this.customD=xstr(b.functions.customd)):this.customD=this.customC=this.customB=this.customA="";void 0!=b.wheel?(this.mouseup=
xstr(b.wheel.up),this.mousedown=xstr(b.wheel.down)):this.mousedown=this.mouseup="";for(var a in this.meta)delete this.meta[a];if(void 0!=b.meta.custom_id)if(b.meta.custom_id instanceof Array)for(a=0;a<b.meta.custom_id.length;a++)this.meta[xstr(b.meta.custom_id[a])]=xstr(b.meta.custom[a]);else this.meta[xstr(b.meta.custom_id)]=xstr(b.meta.custom);this.guides.up="";this.guides.down="";if(void 0!=b.guides.stream_type)if(b.guides.stream_type instanceof Array)for(a=0;a<b.guides.stream_type.length;a++)this.guides[b.guides.stream_type[a]]=
xstr(b.guides.stream_id[a]);else this.guides[b.guides.stream_type]=xstr(b.guides.stream_id);this.landscape=xstr(b.aspect.landscape);this.portrait=xstr(b.aspect.portrait);this.speed=xint(b.animation.speed);this.tweening=xstr(b.animation.tweening);this.fade=xstr(b.animation.fade);this.entropy=xint(b.animation.entropy);this.distortion=xint(b.animation.distortion);this.votetype=xstr(b.voting.type);this.votedefault=xstr(b.voting.defaultvote);this.startaftervote=xbool(b.voting.startaftervote);this.votereference=
xstr(b.voting.reference);for(a=9;9>a;a++)delete this.voteoptions["v"+a];if(void 0==b.voting.option_id||void 0==b.voting.option_id.length)this.voteoptions.v1={id:1,px:0,py:0,show:!1,code:""},this.voteoptions.v2={id:2,px:0,py:0,show:!1,code:""},this.voteoptions.v3={id:3,px:0,py:0,show:!1,code:""},this.voteoptions.v4={id:4,px:0,py:0,show:!1,code:""},this.voteoptions.v5={id:5,px:0,py:0,show:!1,code:""},this.voteoptions.v6={id:6,px:0,py:0,show:!1,code:""},this.voteoptions.v7={id:7,px:0,py:0,show:!1,code:""},
this.voteoptions.v8={id:8,px:0,py:0,show:!1,code:""},this.voteoptions.v9={id:9,px:0,py:0,show:!1,code:""};else for(a=0;a<b.voting.option_id.length;a++)this.voteoptions["v"+b.voting.option_id[a]].px=xint(b.voting.option_px[a]),this.voteoptions["v"+b.voting.option_id[a]].py=xint(b.voting.option_py[a]),this.voteoptions["v"+b.voting.option_id[a]].show=xbool(b.voting.option_show[a]),this.voteoptions["v"+b.voting.option_id[a]].code=xstr(b.voting.option[a]);this.navigation.xnext=xstr(b.navigation.xnext);
this.navigation.ynext=xstr(b.navigation.ynext);this.navigation.znext=xstr(b.navigation.znext);this.navigation.xprev=xstr(b.navigation.xprev);this.navigation.yprev=xstr(b.navigation.yprev);this.navigation.zprev=xstr(b.navigation.zprev);if(b.playlists.playlist_id instanceof Array)for(a=0;a<b.playlists.playlist_id.length;a++)this.plCall(b.playlists.playlist_id[a]);else void 0!=b.playlists.playlist_id&&this.plCall(b.playlists.playlist_id);for(;0<this.keyframes.length;)this.keyframes[0].kill(),this.keyframes.shift();
if(void 0==b.keyframes.keyframe.length)this.keyframes.push(new managana.DISKeyframe(0,b.keyframes.keyframe));else for(a=0;a<b.keyframes.keyframe.length;a++)this.keyframes.push(new managana.DISKeyframe(a,b.keyframes.keyframe[a]));this.dispatchEvent("load")}else{if(null==this.id||(this.id=""))this.state="notready";this.dispatchEvent("error")}};managana.DISStream=e})();this.managana=this.managana||{};
(function(){var e=function(){this.initialize()},a=e.prototype=new createjs.EventDispatcher;a._loader=null;a.state=null;a.id=null;a.title=null;a.copyleft=null;a.copyright=null;a.about=null;a.iconurl=null;a.language=null;a.categories=null;a.swidth=0;a.sheight=0;a.aspect="landscape";a.pwidth=0;a.pheight=0;a.highlight=!1;a.highlightcolor="#000000";a.background="#000000";a.alpha=1;a.home=null;a.voteDefault=0;a.voteRecord=!1;a.grTarget=null;a.grVote000=null;a.grVote010=null;a.grVote020=null;a.grVote030=
null;a.grVote040=null;a.grVote050=null;a.grVote060=null;a.grVote070=null;a.grVote080=null;a.grVote090=null;a.grVote100=null;a.navTransition=null;a.playlists=null;a.mainstream=null;a.upstream=null;a.downstream=null;a.startStream="";a.feeds=null;a.superInitialize=a.initialize;a.initialize=function(){this.superInitialize();this._loader=new ciclope.URLLoader;this.state="notready";this.playlists=[];this.navTransition=[];this.navTransition.xnext="";this.navTransition.xprev="";this.navTransition.ynext="";
this.navTransition.yprev="";this.navTransition.znext="";this.navTransition.zprev="";this.navTransition.home="";this.navTransition.list="";this.feeds=[];this.mainstream=new managana.DISStream("main",this._plLoad.bind(this));this.mainstream.addEventListener("load",this._onStreamLoad.bind(this));this.mainstream.addEventListener("error",this._onStreamError.bind(this));this.upstream=new managana.DISStream("up",this._plLoad.bind(this));this.upstream.addEventListener("load",this._onStreamLoad.bind(this));
this.upstream.addEventListener("error",this._onStreamError.bind(this));this.downstream=new managana.DISStream("down",this._plLoad.bind(this));this.downstream.addEventListener("load",this._onStreamLoad.bind(this));this.downstream.addEventListener("error",this._onStreamError.bind(this))};a.load=function(b){b=b.replace(".dis","");return b!=this.id?(this.state="loading",this._loader.load("community/"+b+".dis/dis.xml",this._onFileLoad.bind(this),!0,!0,"GET"),!0):!1};a.loadStream=function(b){return"loadok"==
this.state?this.mainstream.load(b):!1};a._plLoad=function(b){if(void 0==this.playlists[b]||null==this.playlists[b])this.playlists[b]=new managana.DISPlaylist(b,"community/"+this.id+".dis/playlist/"),this.playlists[b].addEventListener("load",this._onPlaylistLoad.bind(this)),this.playlists[b].addEventListener("error",this._onPlaylistError.bind(this))};a._onStreamLoad=function(b){var a=!0;"main"==b.target.level?"landscape"==this.aspect?""==this.mainstream.landscape||this.mainstream.landscape==this.mainstream.id?
a=!0:(a=!1,this.mainstream.load(this.mainstream.landscape)):""==this.mainstream.portrait||this.mainstream.portrait==this.mainstream.id?a=!0:(a=!1,this.mainstream.load(this.mainstream.portrait)):"down"==b.target.level?"landscape"==this.aspect?""==this.downstream.landscape||this.downstream.landscape==this.downstream.id?a=!0:(a=!1,this.downstream.load(this.downstream.landscape)):""==this.downstream.portrait||this.downstream.portrait==this.downstream.id?a=!0:(a=!1,this.downstream.load(this.downstream.portrait)):
"up"==b.target.level&&("landscape"==this.aspect?""==this.upstream.landscape||this.upstream.landscape==this.upstream.id?a=!0:(a=!1,this.upstream.load(this.upstream.landscape)):""==this.upstream.portrait||this.upstream.portrait==this.upstream.id?a=!0:(a=!1,this.upstream.load(this.upstream.portrait)));if(a){switch(b.target.level){case "main":""!=this.mainstream.guides.up?this.upstream.load(this.mainstream.guides.up):(this.upstream.clear("community/"+this.id+".dis/stream/"),this.dispatchEvent("clearupstream")),
""!=this.mainstream.guides.down?this.downstream.load(this.mainstream.guides.down):(this.downstream.clear("community/"+this.id+".dis/stream/"),this.dispatchEvent("cleardownstream"))}this.dispatchEvent("streamload",b.target)}};a._onStreamError=function(b){this.dispatchEvent("streamerror",b.target)};a._onPlaylistLoad=function(b){b.target.removeEventListener("load",this._onPlaylistLoad.bind(this));b.target.removeEventListener("error",this._onPlaylistError.bind(this));this.dispatchEvent("playlistload",
b.target)};a._onPlaylistError=function(b){this.dispatchEvent("playlisterror",b.target);b=b.target.id;this.playlists[b].removeEventListener("load",this._onPlaylistLoad.bind(this));this.playlists[b].removeEventListener("error",this._onPlaylistError.bind(this));this.playlists[b].kill();delete this.playlists[b]};a._onFileLoad=function(b){if(b){b=this._loader.xml;this.id=xstr(b.meta.id);this.title=xstr(b.meta.title);this.copyleft=xstr(b.meta.copyleft);this.copyright=xstr(b.meta.copyright);this.about=xstr(b.meta.about);
this.iconurl=xstr(b.meta.icon);this.language=xstr(b.meta.lang);this.swidth=xint(b.screen.width);this.sheight=xint(b.screen.height);this.pwidth=xint(b.screen.portrait.width);this.pheight=xint(b.screen.portrait.height);this.highlight=xbool(b.screen.highlight_active);this.highlightcolor=xcolor(b.screen.highlight);this.background=xcolor(b.screen.background);this.alpha=xfloat(b.screen.alpha);this.home=xstr(b.home);this.voteDefault=xint(b.defaultvote);this.voteRecord=xbool(b.voterecord);this.grTarget=xstr(b.graphics.target);
this.grVote000=xstr(b.graphics.vote0);this.grVote010=xstr(b.graphics.vote10);this.grVote020=xstr(b.graphics.vote20);this.grVote030=xstr(b.graphics.vote30);this.grVote040=xstr(b.graphics.vote40);this.grVote050=xstr(b.graphics.vote50);this.grVote060=xstr(b.graphics.vote60);this.grVote070=xstr(b.graphics.vote70);this.grVote080=xstr(b.graphics.vote80);this.grVote090=xstr(b.graphics.vote90);this.grVote100=xstr(b.graphics.vote100);this.navTransition.xprev=xstr(b.transition.xprev);this.navTransition.yprev=
xstr(b.transition.yprev);this.navTransition.zprev=xstr(b.transition.zprev);this.navTransition.xnext=xstr(b.transition.xnext);this.navTransition.ynext=xstr(b.transition.ynext);this.navTransition.znext=xstr(b.transition.znext);this.navTransition.home=xstr(b.transition.home);for(this.navTransition.list=xstr(b.transition.list);0<this.feeds.length;)this.feeds.shift();if(null!=b.feeds)if(b.feeds.feed instanceof Array)for(var a=0;a<b.feeds.feed.length;a++)this.feeds.push({name:xstr(b.feeds.feed[a]),type:xstr(b.feeds.feed_type[a]),
reference:xstr(b.feeds.feed_reference[a])});else this.feeds.push({name:xstr(b.feeds.feed),type:xstr(b.feeds.feed_type),reference:xstr(b.feeds.feed_reference)});for(var d in this.playlists)this.playlists[d].kill(),delete this.playlists[d];this.state="loadok";this.mainstream.clear("community/"+this.id+".dis/stream/");this.upstream.clear("community/"+this.id+".dis/stream/");this.downstream.clear("community/"+this.id+".dis/stream/");""!=this.startStream?this.loadStream(this.startStream):null!=this.home&&
""!=this.home&&this.loadStream(this.home);this.startStream="";this.dispatchEvent("load")}else{if(null==this.id||""==this.id)this.state="notready";this.dispatchEvent("error")}};managana.DISCommunity=e})();this.managana=this.managana||{};
(function(){var e=function(b){this.initialize(b)},a=e.prototype;a._response=null;a.server=null;a.showinterface=!1;a.community=null;a.showrate=null;a.showcomment=!1;a.showclock=!1;a.showuser=!1;a.logo=null;a.showvote=!1;a.showzoom=!1;a.shownote=!1;a.bgcolor="#000000";a._loader=null;a.initialize=function(b){this._response=b;this._loader=new ciclope.URLLoader;this._loader.load("managanaconfig.xml",this._onFileLoad.bind(this),!0,!0,"GET")};a._onFileLoad=function(b){if(b)for(var a=0;a<this._loader.xml.config.length;a++)switch(xstr(this._loader.xml.config[a].name)){case "server":this.server=
this._endSlash(xstr(this._loader.xml.config[a].value));break;case "showinterface":this.showinterface=xbool(this._loader.xml.config[a].value);break;case "community":this.community=xstr(this._loader.xml.config[a].value);break;case "showrate":this.showrate=xbool(this._loader.xml.config[a].value);break;case "showcomment":this.showcomment=xbool(this._loader.xml.config[a].value);break;case "showclock":this.showclock=xbool(this._loader.xml.config[a].value);break;case "showuser":this.showuser=xbool(this._loader.xml.config[a].value);
break;case "showvote":this.showvote=xbool(this._loader.xml.config[a].value);break;case "showzoom":this.showzoom=xbool(this._loader.xml.config[a].value);break;case "shownote":this.shownote=xbool(this._loader.xml.config[a].value);break;case "logo":this.logo=xstr(this._loader.xml.config[a].value);break;case "bgcolor":this.bgcolor="#"+xint(this._loader.xml.config[a].value).toString(16)}this._loader.kill();this._loader=null;null!=this._response&&this._response(b);this._response=null};a._endSlash=function(a){"/"!=
a.substr(-1)&&(a+="/");return a};managana.ConfigData=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.width=1;a.height=1;a.px=this.width/2;a.py=this.height/2;a.pz=0};a.setOUT=function(a){a.toWidth=1;a.toHeight=1;a.toX=this.width/2;a.toY=this.height/2;a.toZ=0};managana.TransitionCENTER=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.py=this.height+1.2*a.height};a.setOUT=function(a){a.toY=-1.2*a.height};managana.TransitionFROMDOWN=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.px=-1.2*a.width};a.setOUT=function(a){a.toX=this.width+1.2*a.width};managana.TransitionFROMLEFT=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.px=this.width+1.2*a.width};a.setOUT=function(a){a.toX=-1.2*a.width};managana.TransitionFROMRIGHT=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.py=-1.2*a.height};a.setOUT=function(a){a.toY=this.height+1.2*a.height};managana.TransitionFROMUP=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){};a.setOUT=function(a){};managana.TransitionNONE=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.py=1.5*this.height};a.setOUT=function(a){a.toY=-0.5*this.height};managana.TransitionSWIPEDOWN=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.px=1.5*this.width};a.setOUT=function(a){a.toX=-0.5*this.width};managana.TransitionSWIPELEFT=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.px=-0.5*this.width};a.setOUT=function(a){a.toX=1.5*this.width};managana.TransitionSWIPERIGHT=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.py=-0.5*this.height};a.setOUT=function(a){a.toY=1.5*this.height};managana.TransitionSWIPEUP=e})();this.managana=this.managana||{};(function(){var e=function(){this.initialize()},a=e.prototype;a.width=0;a.height=0;a.initialize=function(){};a.setIN=function(a){a.alpha=0};a.setOUT=function(a){a.toAlpha=0};managana.TransitionTARGET=e})();this.managana=this.managana||{};
(function(){var e=function(a,c){this.initialize(a,c)},a=e.prototype;a._player=null;a._parser=null;a._numbers=null;a._strings=null;a._comValues=null;a.strValues=null;Object.defineProperty(a,"strValues",{get:function(){var a=[],c;for(c in this._strings)a.push(c+"="+encodeURIComponent(this._strings[c]));return a.join("&")},set:function(a){for(var c in this._strings)delete this._strings[c];a=a.split("&");for(c in a){var d=a[c].split("&");this._strings[d[0]]=decodeURIComponent(d[1])}}});a.numValues=null;
Object.defineProperty(a,"numValues",{get:function(){var a=[],c;for(c in this._numbers)a.push(c+"="+this._numbers[c]);return a.join("&")},set:function(a){for(var c in this._numbers)delete this._numbers[c];a=a.split("&");for(c in a){var d=a[c].split("&");this._numbers[d[0]]=d[1]}}});a.comValues=null;Object.defineProperty(a,"comValues",{get:function(){var a=[],c;for(c in this._comValues)a.push(c+"="+encodeURIComponent(this._comValues[c]));return a.join("&")},set:function(a){for(var c in this._comValues)delete this._comValues[c];
a=a.split("&");for(c in a){var d=a[c].split("&");this._comValues[d[0]]=decodeURIComponent(d[1])}}});a.initialize=function(a,c){this._player=a;this._parser=c;this._numbers=[];this._strings=[];this._comValues=[]};a.checkVar=function(a){"$"==a.substr(0,1)?null!=this._strings[a.substr(1)]&&(a=this._strings[a.substr(1)]):"#"==a.substr(0,1)?null!=this._numbers[a.substr(1)]&&(a=this._numbers[a.substr(1)]):"%"==a.substr(0,1)?null!=this._comValues[a.substr(1)]&&(a=this._comValues[a.substr(1)]):"&"==a.substr(0,
1)&&this._player.isMeta(a.substr(1))&&(a=this._player.getMeta(a.substr(1)));return a};a.check=function(a){var c=!0;if("CODE"!=a[0])c=!1;else if(null!=a[1]&&""!=a[1])switch(a[1]){case "wait":c=null!=a[2]?!0:!1;break;case "clearTimers":c=!0;break;case "clearNumber":case "clearString":case "getStreamID":case "getCommunityID":case "getCategory":c=null!=a[2]?!0:!1;break;case "setString":case "setNumber":case "addToNum":case "subtractFromNum":case "multiplyNum":case "divideNum":case "mergeToStr":case "setRandomNum":c=
null!=a[2]&&null!=a[3]?!0:!1;break;case "getInstanceProp":c=null!=a[2]&&null!=a[3]&&null!=a[4]?!0:!1;break;case "clearAllNumbers":case "clearAllStrings":case "clearAllValues":case "getComValues":case "clearComValues":case "ifComValues":c=!0;break;case "endIf":case "else":case "saveValues":case "loadValues":case "ifUserLogged":c=!0;break;case "ifNumEqual":case "ifNumDifferent":case "ifNumLower":case "ifNumHigher":case "ifNumLowerOrEqual":case "ifNumHigherOrEqual":case "ifStrEqual":case "ifStrDifferent":case "setComValue":case "addToComValue":case "subtractFromComValue":case "multiplyComValue":case "divideComValue":c=
null!=a[2]&&null!=a[3]?!0:!1;break;case "ifNumExist":case "ifStrExist":case "ifIsMeta":c=null!=a[2]?!0:!1;break;case "ifHistoryNext":case "ifHistoryBack":c=!0;break;case "runFunctionA":case "runFunctionB":case "runFunctionC":case "runFunctionD":case "runMouseWUp":case "runMouseWDown":c=!0;break;case "runFeedCode":case "getPostCount":c=null!=a[2]&&null!=a[3]&&null!=a[4]?!0:!1;break;case "ifPostData":c=null!=a[2]&&null!=a[3]&&null!=a[4]&&null!=a[5]?!0:!1;break;case "ifPlayerMobile":case "ifPlayerWeb":case "ifPlayerDesktop":case "ifPlayerShowtime":case "ifPlayerUnknown":c=
!0;break;default:c=!1}else c=!1;return c};a.run=function(a){switch(a[1]){case "wait":this._parser.addHold(parseInt(a[2]));break;case "clearTimers":this._parser.clearTimers();break;case "setNumber":this._numbers[a[2]]=a[3];break;case "setString":this._strings[a[2]]=a[3];break;case "clearNumber":null!=this._numbers[a[2]]&&delete this._numbers[a[2]];break;case "clearString":null!=this._strings[a[2]]&&delete this._strings[a[2]];break;case "clearAllNumbers":for(var c in this._numbers)delete this._numbers[c];
break;case "clearAllStrings":for(var d in this._strings)delete this._strings[d];break;case "clearAllValues":for(var e in this._numbers)delete this._numbers[e];for(e in this._strings)delete this._strings[e];break;case "else":this._parser.elseState();break;case "endIf":this._parser.setIf("noif");break;case "ifNumEqual":isNaN(a[2])||isNaN(a[3])?this._parser.setIf("false"):a[2]==a[3]?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifNumDifferent":isNaN(a[2])||isNaN(a[3])?this._parser.setIf("false"):
a[2]!=a[3]?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifNumLower":isNaN(a[2])||isNaN(a[3])?this._parser.setIf("false"):parseFloat(a[2])<parseFloat(a[3])?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifNumHigher":isNaN(a[2])||isNaN(a[3])?this._parser.setIf("false"):parseFloat(a[2])>parseFloat(a[3])?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifNumLowerOrEqual":isNaN(a[2])||isNaN(a[3])?this._parser.setIf("false"):parseFloat(a[2])<=
parseFloat(a[3])?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifNumHigherOrEqual":isNaN(a[2])||isNaN(a[3])?this._parser.setIf("false"):parseFloat(a[2])>=parseFloat(a[3])?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifStrEqual":a[2]==a[3]?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifStrDifferent":a[2]!=a[3]?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifNumExist":null!=this._numbers[a[2]]?this._parser.setIf("true"):
this._parser.setIf("false");break;case "ifStrExist":null!=this._strings[a[2]]?this._parser.setIf("true"):this._parser.setIf("false");break;case "addToNum":null!=this._numbers[a[2]]&&(isNaN(a[3])||(this._numbers[a[2]]=parseFloat(this._numbers[a[2]])+parseFloat(a[3])));break;case "subtractFromNum":null!=this._numbers[a[2]]&&(isNaN(a[3])||(this._numbers[a[2]]=parseFloat(this._numbers[a[2]])-parseFloat(a[3])));break;case "multiplyNum":null!=this._numbers[a[2]]&&(isNaN(a[3])||(this._numbers[a[2]]=parseFloat(this._numbers[a[2]])*
parseFloat(a[3])));break;case "divideNum":null!=this._numbers[a[2]]&&(isNaN(a[3])||0!=parseFloat(a[3])&&(this._numbers[a[2]]=parseFloat(this._numbers[a[2]])/parseFloat(a[3])));break;case "mergeToStr":null!=this._strings[a[2]]&&(this._strings[a[2]]=this._strings[a[2]].toString()+a[3].toString());break;case "getStreamID":this._strings[a[2]]=this._player.currentStream;break;case "getCommunityID":this._strings[a[2]]=this._player.currentCommunity;break;case "getCategory":this._strings[a[2]]=this._player.streamCategory;
break;case "getInstanceProp":var f=this._player.getImage(a[3]);if(null!=f)switch(a[4]){case "x":this._numbers[a[2]]=f.px;break;case "y":this._numbers[a[2]]=f.py;break;case "z":this._numbers[a[2]]=f.pz;break;case "rx":this._numbers[a[2]]=0;break;case "ry":this._numbers[a[2]]=0;break;case "rz":this._numbers[a[2]]=f.rotation;break;case "width":this._numbers[a[2]]=f.width;break;case "height":this._numbers[a[2]]=f.height;break;case "alpha":this._numbers[a[2]]=f.alpha;break;case "volume":this._numbers[a[2]]=
f.volume;break;case "red":this._numbers[a[2]]=f.red;break;case "green":this._numbers[a[2]]=f.green;break;case "blue":this._numbers[a[2]]=f.blue;break;case "element":this._strings[a[2]]=f.element;break;case "blend":this._strings[a[2]]=f.blendMode}break;case "saveValues":this._player.send(null,"savedata");break;case "loadValues":this._player.send(null,"loaddata");break;case "setRandomNum":isNaN(a[3])||(this._numbers[a[2]]=Math.round(Math.random()*Number(a[3])));break;case "getComValues":for(var g in this._comValues)delete this._comValues[g];
this._player.send(null,"loadcomvalues");break;case "clearComValues":for(var h in this._comValues)delete this._comValues[h];break;case "ifComValues":a=!1;for(f in this._comValues)a=!0;a?this._parser.setIf("true"):this._parser.setIf("false");break;case "setComValue":this._player.send({varName:a[2],varValue:a[3]},"savecomvalue");break;case "addToComValue":this._player.send({varName:a[2],varValue:a[3],varAction:"add"},"changecomvalue");break;case "subtractFromComValue":this._player.send({varName:a[2],
varValue:a[3],varAction:"subtract"},"changecomvalue");break;case "multiplyComValue":this._player.send({varName:a[2],varValue:a[3],varAction:"multiply"},"changecomvalue");break;case "divideComValue":this._player.send({varName:a[2],varValue:a[3],varAction:"divide"},"changecomvalue");break;case "ifUserLogged":this._player.usrLogged?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifHistoryNext":this._player.hasHistoryNext()?this._parser.setIf("true"):this._parser.setIf("false");break;
case "ifHistoryBack":this._player.hasHistoryBack()?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifIsMeta":this._player.isMeta(a[2])?this._parser.setIf("true"):this._parser.setIf("false");break;case "runFunctionA":this._player.runCustomFunction("A");break;case "runFunctionB":this._player.runCustomFunction("B");break;case "runFunctionC":this._player.runCustomFunction("C");break;case "runFunctionD":this._player.runCustomFunction("D");break;case "runMouseWUp":this._player.mouseWheelUp();
break;case "runMouseWDown":this._player.mouseWheelDown();break;case "runFeedCode":a[3]=noSpecial(a[3]);this._player.feeds.isFeed(a[2],a[3])&&(this._player.feeds.isReady(a[2],a[3])&&this._player.feeds.length(a[2],a[3])>parseInt(a[4]))&&(a=this._player.feeds.getPost(a[2],a[3],parseInt(a[4])),null!=a.code&&this._parser.run(a.code));break;case "getPostCount":this._numbers[a[2]]=0;a[4]=noSpecial(a[4]);this._player.feeds.isFeed(a[3],a[4])&&this._player.feeds.isReady(a[3],a[4])&&(this._numbers[a[2]]=this._player.feeds.length(a[3],
a[4]));break;case "ifPostData":f=!1;a[3]=noSpecial(a[3]);this._player.feeds.isFeed(a[2],a[3])&&(this._player.feeds.isReady(a[2],a[3])&&this._player.feeds.length(a[2],a[3])>parseInt(a[4]))&&(c=this._player.feeds.getPost(a[2],a[3],parseInt(a[4])),null!=c.getField(a[5])&&""!=c.getField(a[5])&&(f=!0));f?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifPlayerMobile":"mobile"==this._player.type?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifPlayerWeb":"web"==this._player.type?
this._parser.setIf("true"):this._parser.setIf("false");break;case "ifPlayerShowtime":"showtime"==this._player.type?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifPlayerDesktop":"desktop"==this._player.type?this._parser.setIf("true"):this._parser.setIf("false");break;case "ifPlayerUnknown":"mobile"!=this._player.type&&"web"!=this._player.type&&"showtime"!=this._player.type&&"desktop"!=this._player.type?this._parser.setIf("true"):this._parser.setIf("false")}};managana.ParserCODE=
e})();this.managana=this.managana||{};
(function(){var e=function(a){this.initialize(a)},a=e.prototype;a._player=null;a.initialize=function(a){this._player=a};a.check=function(a){var c=!0;if("STREAM"!=a[0])c=!1;else switch(a[1]){case "play":case "pause":case "clearTransition":case "nextX":case "nextY":case "nextZ":case "previousX":case "previousY":case "previousZ":case "historyNext":case "historyBack":c=!0;break;case "load":case "transition":case "gotoKeyframe":c=null!=a[2]?!0:!1;break;default:c=!1}return c};a.run=function(a){switch(a[1]){case "play":this._player.play();
break;case "pause":this._player.pause();break;case "load":this._player.loadStream(a[2]);break;case "transition":this._player.transition=a[2];break;case "gotoKeyframe":this._player.nextKeyframe=int(a[2])-1;break;case "clearTransition":this._player.transition="";break;case "nextX":this._player.navigateTo("xnext");break;case "nextY":this._player.navigateTo("ynext");break;case "nextZ":this._player.navigateTo("znext");break;case "previousX":this._player.navigateTo("xprev");break;case "previousY":this._player.navigateTo("yprev");
break;case "previousZ":this._player.navigateTo("zprev");break;case "historyNext":this._player.historyNext();break;case "historyBack":this._player.historyBack()}};managana.ParserSTREAM=e})();this.managana=this.managana||{};
(function(){var e=function(a){this.initialize(a)},a=e.prototype;a._player=null;a.initialize=function(a){this._player=a};a.check=function(a){var c=!0;if("INSTANCE"!=a[0])c=!1;else if(null!=a[1]&&""!=a[1])switch(a[2]){case "runCode":case "webcam":case "clearWebcam":case "forceLoop":case "unforceLoop":case "fullScreen":case "clearFullScreen":case "hideSubtitle":case "showSubtitle":case "toggleSubtitle":case "next":case "pause":case "play":case "previous":case "hide":case "show":case "clearAllSets":case "clearElement":case "clearURL":case "clearSubtitle":case "scrollUp":case "scrollDown":case "scrollTop":case "scrollBottom":c=!0;
break;case "element":case "mediaURL":case "setSubtitle":case "clearSet":case "seek":c=null!=a[3]?!0:!1;break;case "set":if("x"==a[3]||"y"==a[3]||"z"==a[3])c=null!=a[4]?!0:!1;if("width"==a[3]||"height"==a[3])c=null!=a[4]?!0:!1;if("rx"==a[3]||"ry"==a[3]||"rz"==a[3])c=null!=a[4]?!0:!1;if("alpha"==a[3]||"blend"==a[3]||"volume"==a[3])c=null!=a[4]?!0:!1;if("red"==a[3]||"green"==a[3]||"blue"==a[3])c=null!=a[4]?!0:!1;break;default:c=!1}else c=!1;return c};a.run=function(a){var c=this._player.getImage(a[1]);
if(null!=c)switch(a[2]){case "runCode":this._player.run(c.action);break;case "forceLoop":c.force("loop",!0);break;case "unforceLoop":c.unforce("loop");break;case "fullScreen":c.force("width",this._player.width);c.force("height",this._player.height);c.force("x",0);c.force("y",0);c.force("z",0);break;case "clearFullScreen":c.unforce("width");c.unforce("height");c.unforce("x");c.unforce("y");c.unforce("z");break;case "hideSubtitle":c.subtitleVisible=!1;break;case "showSubtitle":c.subtitleVisible=!0;
break;case "toggleSubtitle":c.subtitleVisible=!c.subtitleVisible;break;case "next":c.next();break;case "pause":c.pause();break;case "play":c.play(-1,!0);break;case "seek":c.seek(Math.round(parseFloat(a[3])));break;case "previous":c.previous();break;case "hide":c.force("visible",!1);break;case "show":c.force("visible",!0);break;case "clearAllSets":c.unforceAll();break;case "element":c.force("element",a[3]);break;case "clearElement":c.unforce("element");break;case "setSubtitle":c.setSubtitle(a[3]);
break;case "clearSubtitle":c.setSubtitle(null);break;case "clearSet":c.unforce(a[3]);break;case "set":c.force(a[3],a[4]);break;case "scrollUp":c.scrollUp();break;case "scrollDown":c.scrollDown();break;case "scrollTop":c.scrollToTop();break;case "scrollBottom":c.scrollToBottom()}};managana.ParserINSTANCE=e})();this.managana=this.managana||{};
(function(){var e=function(a){this.initialize(a)},a=e.prototype;a._player=null;a.initialize=function(a){this._player=a};a.check=function(a){var c=!0;if("COMMUNITY"!=a[0])c=!1;else if(null!=a[1]&&""!=a[1])switch(a[1]){case "loadCommunity":c=null!=a[2]?!0:!1;break;case "showLowerGuide":case "hideLowerGuide":case "showUpperGuide":case "hideUpperGuide":case "showMainLayer":case "hideMainLayer":c=!0;break;default:c=!1}else c=!1;return c};a.run=function(a){switch(a[1]){case "loadCommunity":null!=a[3]&&
(this._player.startStream=a[3]);this._player.loadCommunity(a[2]);break;case "showLowerGuide":this._player.lowerGuideVisible=!0;break;case "hideLowerGuide":this._player.lowerGuideVisible=!1;break;case "showUpperGuide":this._player.upperGuideVisible=!0;break;case "hideUpperGuide":this._player.upperGuideVisible=!1;break;case "showMainLayer":this._player.mainLayerVisible=!0;break;case "hideMainLayer":this._player.mainLayerVisible=!1}};managana.ParserCOMMUNITY=e})();this.managana=this.managana||{};
(function(){var e=function(a){this.initialize(a)},a=e.prototype;a._player=null;a.initialize=function(a){this._player=a};a.check=function(a){var c=!0;if("MESSAGE"!=a[0])c=!1;else if(null!=a[1]&&""!=a[1])switch(a[1]){case "custom":case "openurl":case "send":c=null!=a[2]?!0:!1;break;case "htmlbox":c=null!=a[2]&&null!=a[3]?!0:!1;break;case "openfeedlink":c=null!=a[2]&&null!=a[3]&&null!=a[4]?!0:!1;break;case "sharefacebook":case "sharetwitter":case "sharegplus":case "startPCodeSend":case "endPCodeSend":c=!0;
break;default:c=!1}else c=!1;return c};a.run=function(a){var c={};c.key=a[1];switch(a[1]){case "custom":c.value=a[2];this._player.send(c,"message");break;case "send":c.value=a[2];this._player.send(c,"sendconnected");break;case "openurl":c.value=a[2];this._player.send(c,"openurl");break;case "openfeedlink":a[3]=noSpecial(a[3]);this._player.feeds.isFeed(a[2],a[3])&&(this._player.feeds.isReady(a[2],a[3])&&this._player.feeds.length(a[2],a[3])>parseInt(a[4]))&&(a=this._player.feeds.getPost(a[2],a[3],parseInt(a[4])),
c.value=a.link,this._player.send(c,"openurl"),a.kill());break;case "sharefacebook":""!=this._player.shareurl&&(c.value="http://www.facebook.com/sharer.php?t="+encodeURIComponent(this._player.currentStreamTitle)+"&u="+encodeURIComponent(this._player.shareurl+"?c="+this._player.currentCommunity+"&s="+this._player.currentStream),c.community=this._player.currentCommunity,c.stream=this._player.currentStream,c.share=this._player.shareurl,this._player.send(c,"share"));break;case "sharetwitter":""!=this._player.shareurl&&
(c.value="https://twitter.com/intent/tweet?text="+encodeURIComponent(this._player.currentCommunityTitle+": "+this._player.currentStreamTitle)+"&url="+encodeURIComponent(this._player.shareurl+"?c="+this._player.currentCommunity+"&s="+this._player.currentStream),c.community=this._player.currentCommunity,c.stream=this._player.currentStream,c.share=this._player.shareurl,this._player.send(c,"share"));break;case "sharegplus":""!=this._player.shareurl&&(c.value="https://plus.google.com/share?url="+encodeURIComponent(this._player.shareurl+
"?c="+this._player.currentCommunity+"&s="+this._player.currentStream),c.community=this._player.currentCommunity,c.stream=this._player.currentStream,c.share=this._player.shareurl,this._player.send(c,"share"));break;case "htmlbox":c.from=a[2],c.folder=a[3],this._player.send(c,"htmlbox")}};managana.ParserMESSAGE=e})();this.managana=this.managana||{};
(function(){var e=function(a){this.initialize(a)},a=e.prototype;a._player=null;a.initialize=function(a){this._player=a};a.check=function(a){var c=!0;if("SYSTEM"!=a[0])c=!1;else if(null!=a[1]&&""!=a[1])switch(a[1]){case "print":case "showClock":case "hideClock":case "showRate":case "hideRate":case "showComments":case "hideComments":case "showBookmarks":case "hideBookmarks":case "showNotes":case "hideNotes":c=!0;break;case "loadMobileVideo":case "loadMobileAudio":c=!0;break;default:c=!1}else c=!1;return c};
a.run=function(a){switch(a[1]){case "print":window.print();break;case "loadMobileVideo":this._player.loadMobileVideo(a[2]);break;case "loadMobileAudio":this._player.loadMobileAudio(a[2])}};managana.ParserSYSTEM=e})();this.managana=this.managana||{};
(function(){var e=function(a,c,d,e,f,g,h,l,m,n,p,q,r,s,t,u,v,w,x){this.initialize(a,c,d,e,f,g,h,l,m,n,p,q,r,s,t,u,v,w,x)},a=e.prototype=new createjs.EventDispatcher;a.ready=!1;a.title="";a.excerpt="";a.text="";a.picture="";a.audio="";a.video="";a.code="";a.link="";a.author="";a.feedName="";a.feedType="";a.pubDate=new Date;a.rawDate="";a.extra1="";a.extra2="";a.extra3="";a.extra4="";a.extra5="";a.fullText="";a.superInitialize=a.initialize;a.initialize=function(a,c,d,e,f,g,h,l,m,n,p,q,r,s,t,u,v,w,x){this.superInitialize();
this.title=a;this.excerpt=c;this.text=d;this.link=e;this.author=p;this.feedName=g;this.feedType=h;this.pubDate=f;this.picture=l;this.audio=m;this.video=n;this.code=q;this.rawDate=r;this.extra1=s;this.extra2=t;this.extra3=u;this.extra4=v;this.extra5=w;this.fullText=x;this.ready=!0};a.getPubDate=function(a){var c="";switch(a){case "dateRAW":c=this.rawDate;break;case "dateYYYY":c=pubDate.getFullYear()+"-"+this._leading0(pubDate.getMonth()+1,2)+"-"+this._leading0(pubDate.getDate(),2);break;case "dateMM":c=
this._leading0(pubDate.getMonth()+1,2)+"/"+this._leading0(pubDate.getDate(),2)+"/"+pubDate.getFullYear();break;case "dateDD":c=this._leading0(pubDate.getDate(),2)+"/"+this._leading0(pubDate.getMonth()+1,2)+"/"+pubDate.getFullYear();break;case "timeYYYY":c=pubDate.getFullYear()+"-"+this._leading0(pubDate.getMonth()+1,2)+"-"+this._leading0(pubDate.getDate(),2)+" - "+this._leading0(pubDate.getHours(),2)+":"+this._leading0(pubDate.getMinutes(),2);break;case "timeMM":c=this._leading0(pubDate.getMonth()+
1,2)+"/"+this._leading0(pubDate.getDate(),2)+"/"+pubDate.getFullYear()+" - "+this._leading0(pubDate.getHours(),2)+":"+this._leading0(pubDate.getMinutes(),2);break;case "timeDD":c=this._leading0(pubDate.getDate(),2)+"/"+this._leading0(pubDate.getMonth()+1,2)+"/"+pubDate.getFullYear()+" - "+this._leading0(pubDate.getHours(),2)+":"+this._leading0(pubDate.getMinutes(),2);break;case "time":c=this._leading0(pubDate.getHours(),2)+":"+this._leading0(pubDate.getMinutes(),2);break;case "DAY":c=this._leading0(pubDate.getDate(),
2);break;case "MONTH":c=this._leading0(pubDate.getMonth()+1,2);break;case "YEAR":c=pubDate.getFullYear();break;case "HOUR":c=this._leading0(pubDate.getHours(),2);break;case "MINUTE":c=this._leading0(pubDate.getMinutes(),2)}return c};a.getField=function(a){var c="";switch(a){case "title":c=this.title;break;case "excerpt":c=this.excerpt;break;case "text":c=this.text;break;case "picture":c=this.picture;break;case "audio":c=this.audio;break;case "video":c=this.video;break;case "link":c=this.link;break;
case "author":c=this.author;break;case "code":c=this.code;break;case "extra1":c=this.extra1;break;case "extra2":c=this.extra2;break;case "extra3":c=this.extra3;break;case "extra4":c=this.extra4;break;case "extra5":c=this.extra5;break;case "fulltext":c=this.fullText;break;default:c=this.getPubDate(a)}return c};a.kill=function(){this.ready=this.fullText=this.extra5=this.extra4=this.extra3=this.extra2=this.extra1=this.rawDate=this.code=this.video=this.audio=this.picture=this.pubDate=this.feedType=this.feedName=
this.author=this.link=this.text=this.excerpt=this.title=null};a._leading0=function(a,c){for(var d=""+a;d.length<c;)d="0"+d;return d};managana.FeedData=e})();this.managana=this.managana||{};
(function(){var e=function(a){this.initialize(a)},a=e.prototype=new createjs.EventDispatcher;a._type=null;a._feeds=null;a.superInitialize=a.initialize;a.initialize=function(a){this.superInitialize();this._type=a;this._feeds=[]};a.addFeed=function(a,c,d,e){var f=[];f.name=a;f.type=this._type;f.url="WORDPRESS"==this._type?d:c+"?type="+this._type+"&com="+e+"&ref="+encodeURIComponent(d);f.posts=[];f.ready=!1;f.length=0;this._feeds[a]=f};a.isFeed=function(a){return null!=this._feeds[a]};a.isReady=function(a){return this.isFeed(a)?
this._feeds[a].ready:!1};a.length=function(a){return this.isFeed(a)?this._feeds[a].length:0};a.getPost=function(a,c){return this.isReady(a)?c<this.length(a)?this._feeds[a].posts[c]:null:null};a.update=function(a){return null!=this._feeds[a]?(a=new ciclope.TextCache(this._feeds[a].url,"","POST",a),a.addEventListener("error",this._onLoadError.bind(this)),a.addEventListener("finished",this._onLoadFinish.bind(this)),!0):!1};a.kill=function(){for(var a in this._feeds){for(;0<this._feeds[a].posts.length;)this._feeds[a].posts[0].kill(),
this._feeds[a].posts.shift();delete this._feeds[a].name;delete this._feeds[a].url;delete this._feeds[a].posts;delete this._feeds[a].ready;delete this._feeds[a].length;delete this._feeds[a]}};a._onLoadError=function(a){a=a.target;a.removeEventListener("error",this._onLoadError.bind(this));a.removeEventListener("finished",this._onLoadFinish.bind(this));a.kill()};a._onLoadFinish=function(a){a=a.target;a.removeEventListener("error",this._onLoadError.bind(this));a.removeEventListener("finished",this._onLoadFinish.bind(this));
var c=a.xml;if(null!=c){var d=null;null!=c.channel&&(d=c.channel instanceof Array?c.channel[0]:c.channel);if(null!=d){for(;0<this._feeds[a.name].posts.length;)this._feeds[a.name].posts[0].kill(),this._feeds[a.name].posts.shift();this._feeds[a.name].length=0;if(null!=d.item){if(d.item instanceof Array)for(c=0;c<d.item.length;c++){var e=xstr(d.item[c].title),f=xstr(d.item[c].description),g=xstr(d.item[c].link),h=xdate(d.item[c].pubDate),l=xstr(d.item[c].picture),m=xstr(d.item[c].audio),n=xstr(d.item[c].video),
p=xstr(d.item[c].code),q=xstr(d.item[c].author),r=xstr(d.item[c].pubDate),s=xstr(d.item[c].extra1),t=xstr(d.item[c].extra2),u=xstr(d.item[c].extra3),v=xstr(d.item[c].extra4),w=xstr(d.item[c].extra5),x=xstr(d.item[c].fulltext);this._feeds[a.name].posts.push(new managana.FeedData(e,f,f,g,h,a.name,this._type,l,m,n,q,p,r,s,t,u,v,w,x));this._feeds[a.name].length+=1}else e=xstr(d.item.title),f=xstr(d.item.description),g=xstr(d.item.link),h=xdate(d.item.pubDate),l=xstr(d.item.picture),m=xstr(d.item.audio),
n=xstr(d.item.video),p=xstr(d.item.code),q=xstr(d.item.author),r=xstr(d.item.pubDate),s=xstr(d.item.extra1),t=xstr(d.item.extra2),u=xstr(d.item.extra3),v=xstr(d.item.extra4),w=xstr(d.item.extra5),x=xstr(d.item.fulltext),this._feeds[a.name].posts.push(new managana.FeedData(e,f,f,g,h,a.name,this._type,l,m,n,q,p,r,s,t,u,v,w,x)),this._feeds[a.name].length+=1;this._feeds[a.name].ready=0<this._feeds[a.name].length;this._feeds[a.name].ready?this.dispatchEvent("feedready",this._feeds[a.name]):this.dispatchEvent("feederror",
this._feeds[a.name])}}else this.dispatchEvent("feederror",this._feeds[a.name])}else this.dispatchEvent("feederror",this._feeds[a.name])};managana.FeedType=e})();this.managana=this.managana||{};
(function(){var e=function(){this.initialize()},a=e.prototype=new createjs.EventDispatcher;a._types=null;a.feedurl="";a.superInitialize=a.initialize;a.initialize=function(){this.superInitialize();this._types=[];this.clear()};a.clear=function(){for(var a in this._types)this._types[a].removeEventListener("feedready",this._onFeedReady.bind(this)),this._types[a].removeEventListener("feederror",this._onFeedError.bind(this)),this._types[a].kill(),delete this._types[a];this._types.RSS2=new managana.FeedType("RSS2");
this._types.RSS2.addEventListener("feedready",this._onFeedReady.bind(this));this._types.RSS2.addEventListener("feederror",this._onFeedError.bind(this));this._types.TWITTER=new managana.FeedType("TWITTER");this._types.TWITTER.addEventListener("feedready",this._onFeedReady.bind(this));this._types.TWITTER.addEventListener("feederror",this._onFeedError.bind(this));this._types.FACEBOOK=new managana.FeedType("FACEBOOK");this._types.FACEBOOK.addEventListener("feedready",this._onFeedReady.bind(this));this._types.FACEBOOK.addEventListener("feederror",
this._onFeedError.bind(this));this._types.WORDPRESS=new managana.FeedType("WORDPRESS");this._types.WORDPRESS.addEventListener("feedready",this._onFeedReady.bind(this));this._types.WORDPRESS.addEventListener("feederror",this._onFeedError.bind(this))};a.addFeed=function(a,c,d,e){return null!=this._types[a]?(this._types[a].addFeed(c,this.feedurl,d,e),this._types[a].update(c),!0):!1};a.isFeed=function(a,c){return null!=this._types[a]?this._types[a].isFeed(c):!1};a.isReady=function(a,c){return null!=this._types[a]?
this._types[a].isReady(c):!1};a.length=function(a,c){return null!=this._types[a]?this._types[a].length(c):0};a.getPost=function(a,c,d){return null!=this._types[a]?this._types[a].getPost(c,d):null};a.update=function(a,c){return null!=this._types[a]?this._types[a].update(c):!1};a._onFeedReady=function(a){this.dispatchEvent("ready",a.target)};a._onFeedError=function(a){this.dispatchEvent("error",a.target)};managana.ManaganaFeed=e})();this.managana=this.managana||{};
(function(){var e=function(a,c,d,e,f,g){this.initialize(a,c,d,e,f,g)},a=e.prototype=new createjs.Container;a._ismobile=!1;a._showicon=!0;a._videoicon=null;a._ismobileaudio=!1;a._media=null;a._width=160;a._height=90;a._x=0;a._y=0;a._hwidth=80;a._hheight=45;a._volume=1;a._mask=null;a.state="new";a.instance=null;a._force=null;a._playlist=null;a._element=null;a._mouseover=!1;a._parser=null;a._feeds=null;a.src=null;Object.defineProperty(a,"src",{get:function(){return this._media.src}});a.oWidth=null;Object.defineProperty(a,
"oWidth",{get:function(){return this._media.oWidth}});a.oHeight=null;Object.defineProperty(a,"oHeight",{get:function(){return this._media.oHeight}});a.type="none";Object.defineProperty(a,"type",{get:function(){return this._media.type}});a.px=0;Object.defineProperty(a,"px",{get:function(){return this._x},set:function(a){this._x=a;this.x=a+this._hwidth}});a.py=0;Object.defineProperty(a,"py",{get:function(){return this._y},set:function(a){this._y=a;this.y=a+this._hheight}});a.pz=0;Object.defineProperty(a,
"pz",{get:function(){return this.instance.pz},set:function(a){this.instance.pz=a}});a.width=160;Object.defineProperty(a,"width",{get:function(){return this._width},set:function(a){this._width=a;this._hwidth=a/2;this._media.width=a;this._mask.scaleX=this._width/100;this._media.x=-this._hwidth;this._mask.x=this._media.x;this.px=this._x;this._ismobile&&this._showicon&&(this._videoicon.scaleX=this._width/5/216,this._videoicon.scaleY=this._videoicon.scaleX,this._videoicon.x=-this._hwidth+2*this._width/
5,this._videoicon.y=-this._hheight+(this._height-this._width/5)/2)}});a.height=90;Object.defineProperty(a,"height",{get:function(){return this._height},set:function(a){this._height=a;this._hheight=a/2;this._media.height=a;this._mask.scaleY=this._height/100;this._media.y=-this._hheight;this._mask.y=this._media.y;this.py=this._y;this._ismobile&&this._showicon&&(this._videoicon.scaleX=this._width/5/216,this._videoicon.scaleY=this._videoicon.scaleX,this._videoicon.x=-this._hwidth+2*this._width/5,this._videoicon.y=
-this._hheight+(this._height-this._width/5)/2)}});a.element=null;Object.defineProperty(a,"element",{get:function(){return this._element},set:function(a){a!=this._element&&(this._loadFileElement(a),this._element=a)}});a.volume=1;Object.defineProperty(a,"volume",{get:function(){return this._volume},set:function(a){this._volume=a;this._media.volume=a}});a.subtitleVisible=!0;Object.defineProperty(a,"subtitleVisible",{get:function(){return this._media.subtitleVisible},set:function(a){this._media.subtitleVisible=
a}});a.time=0;Object.defineProperty(a,"time",{get:function(){return this._media.time},set:function(a){this._media.time=a}});a.totalTime=10;Object.defineProperty(a,"totalTime",{get:function(){return this._media.totalTime},set:function(a){this._media.totalTime=a}});a.mediaState="pause";Object.defineProperty(a,"mediaState",{get:function(){return this._media.mediaState},set:function(a){this._media.mediaState=a}});a.font="Verdana";Object.defineProperty(a,"font",{get:function(){return this._media.font},
set:function(a){this._media.font=font}});a.size=12;Object.defineProperty(a,"size",{get:function(){return this._media.size},set:function(a){this._media.size=a}});a.bold=!1;Object.defineProperty(a,"bold",{get:function(){return this._media.bold},set:function(a){this._media.bold=a}});a.italic=!1;Object.defineProperty(a,"italic",{get:function(){return this._media.italic},set:function(a){this._media.italic=a}});a.color="#000";Object.defineProperty(a,"color",{get:function(){return this._media.color},set:function(a){this._media.color=
a}});a.align="left";Object.defineProperty(a,"align",{get:function(){return this._media.align},set:function(a){this._media.align=a}});a.mode="paragraph";Object.defineProperty(a,"mode",{get:function(){return this._media.mode},set:function(a){this._media.mode=a}});a.superInitialize=a.initialize;a.initialize=function(a,c,d,e,f,g){this.superInitialize();this._media=new ciclope.MediaSprite;this._media.addEventListener("load",this._onMediaLoad.bind(this));this._media.addEventListener("error",this._onMediaError.bind(this));
this._media.addEventListener("ended",this._onMediaEnded.bind(this));this._media.addEventListener("update",this._onMediaUpdate.bind(this));this._media.loop=!1;this.addChild(this._media);this._videoicon=new createjs.Bitmap("managanapics/mobilevideoplay.png");this._videoicon.visible=!1;this.addChild(this._videoicon);this._mask=new createjs.Shape;this._mask.graphics.beginFill("#00000").drawRect(0,0,100,100);this.hitArea=this._media.mask=this._mask;this._ismobile=f;this._showicon=g;this.instance=a;this._tween=
{};this.loaded=!1;this._element=a.element;this.state="new";this._loadstate="clean";this._playing=a.play;this._media.playOnLoad=a.play;this.px=this.toX=a.px;this.py=this.toY=a.py;this.pz=this.toZ=a.pz;this.order=a.order;this.rotation=this.toRZ=a.rz;this.width=this.toWidth=a.width;this.height=this.toHeight=a.height;this.alpha=this.toAlpha=a.alpha;this.volume=this.toVolume=a.volume;this._media.applyColor(a.red,a.green,a.blue);this.visible=a.visible;this.smoothing=a.smooth;this._media.font=a.font;this._media.size=
a.fontsize;this._media.bold=a.bold;this._media.italic=a.italic;this.maxchars=a.charmax;this._media.color=a.fontcolor;this._media.align=a.textalign;this._media.lineHeight=1.3*a.fontsize+a.leading;this.transition=a.transition;this._media.shadow=a.DropShadowFilter?new createjs.Shadow(a.DSFcolor,a.DSFdistance,a.DSFdistance,a.DSFblurX):null;this.currentAction=a.action;this.endAction="";this.path=c;this._parser=d;this._force=[];this._feeds=e};a.load=function(a,c){return this._media.load(a,c)};a.play=function(){this._media.play()};
a.pause=function(){this._media.pause()};a.stop=function(){this._media.stop()};a.seek=function(a){this._media.seek(a)};a.clearSrc=function(){this._media.clearSrc()};a.checkPlaylist=function(a){this.instance.playlist==a.id&&null==this._playlist&&(this.loaded=!0,this._playlist=a,a.ready?this._loadFileElement(this._element):this.visible=!1)};a.newInstance=function(a){this._mouseover&&this._media.hasEventListener("click")&&this._media.removeEventListener("click",this._onMediaClick.bind(this));var c=!0;
this._element==a.element&&(c=!1);null!=this._playlist&&(null!=a&&this._playlist.id!=a.playlist)&&(this.loaded=!1,this._playlist=null,this._element=a.element,c=!0);this.instance=a;a.active&&(this.toX=this.instance.px,this.toY=this.instance.py,this.instance.pz!=this.toZ&&(this.toZ=this.instance.pz),this.instance.rz!=this.toRZ&&(this.toRZ=this.instance.rz),this.toOrder=this.instance.order,this.toWidth=this.instance.width,this.toHeight=this.instance.height,this.toAlpha=this.instance.alpha,this.toVolume=
this.instance.volume,this._media.applyColor(a.red,a.green,a.blue),c&&(this._playing=a.play),this._media.playOnLoad=a.play,null==this._force.url&&(null!=this._force.element?this.element=this._force.element:this.instance.force?this.element=this.instance.element:c&&(this.element=this.instance.element)),this._currentAction=this.instance.action,""==this._currentAction&&(this._checkAction(0),this._checkAction(this._media.time)),this.visible=null==this._force.visible?this.instance.visible:this._force.visible,
this._media.font=a.font,this._media.size=a.fontsize,this._media.bold=a.bold,this._media.italic=a.italic,this.maxchars=a.charmax,this._media.color=a.fontcolor,this._media.lineHeight=1.3*a.fontsize+a.leading,this._media.align=""==a.textalign?"left":a.textalign,this.transition=a.transition,this._media.shadow=a.DropShadowFilter?new createjs.Shadow(a.DSFcolor,a.DSFdistance,a.DSFdistance,a.DSFblurX):null)};a.force=function(a,c){"element"==a&&(delete this._force.element,this.element=c);this._force[a]=c};
a.unforce=function(a){delete this._force[a]};a.unforceAll=function(){for(var a in this._force)delete this._force[a]};a.next=function(){delete this._force.element;this.element=this._playlist.getNextElement(this.element);this._force.element=this.element};a.previous=function(){delete this._force.element;this.element=this._playlist.getPreviousElement(this._element);this._force.element=this.element};a._loadFileElement=function(a){""==this.instance.action&&(this._currentAction="");if((null==this._force.element||
void 0==this._force.element)&&null!=this._playlist){var c=this._playlist.getElement(a);if(null!=c){this._videoicon.visible=!1;if("text"==c.type){this._media.mode="artistic";if(""==c.ffeed)this._media.load(this._maxchars(this._noHTML(c.file)),"text");else if(this._feeds.isFeed(c.ffeedtype,c.ffeed))if(this._feeds.isReady(c.ffeedtype,c.ffeed)){if(parseInt(c.file)<this._feeds.length(c.ffeedtype,c.ffeed)){var d=this._feeds.getPost(c.ffeedtype,c.ffeed,parseInt(c.file));null!=d&&d.ready&&this._media.load(this._maxchars(this._noHTML(d.getField(c.ffeedfield))),
"text")}}else this._feeds.addEventListener("ready",this._onFeedReady.bind(this)),this._feeds.addEventListener("error",this._onFeedError.bind(this));this._element=a;this._loadstate="loaded";this._checkAction(0);this._endAction=c.endAction}else"paragraph"==c.type?(this._media.mode="paragraph",this._element=a,this._loadstate="loaded",this._checkAction(0),this._endAction=c.endAction,""==c.ffeed?this._media.load(this._maxchars(this._noHTML(c.file)),"text"):this._feeds.isFeed(c.ffeedtype,c.ffeed)&&(this._feeds.isReady(c.ffeedtype,
c.ffeed)?parseInt(c.file)<this._feeds.length(c.ffeedtype,c.ffeed)&&(d=this._feeds.getPost(c.ffeedtype,c.ffeed,parseInt(c.file)),null!=d&&d.ready&&this._media.load(this._maxchars(this._noHTML(d.getField(c.ffeedfield))),"text")):(this._feeds.addEventListener("ready",this._onFeedReady.bind(this)),this._feeds.addEventListener("error",this._onFeedError.bind(this))))):(this._element=a,this._loadstate="loaded",this._checkAction(0),this._endAction=c.endAction,""==c.ffeed?this._ismobile?"video"==c.type?(this._showicon&&
(this._videoicon.visible=!0),this._media.load(this._thumbfile(this.path+c.file),"picture"),this.instance.action="SYSTEM->loadMobileVideo->"+this._media.getPreferredFile(this.path+c.file,"video"),this._currentAction="SYSTEM->loadMobileVideo->"+this._media.getPreferredFile(this.path+c.file,"video")):"audio"==c.type?(this._parser.run("SYSTEM->loadMobileAudio->"+this._media.getPreferredFile(this.path+c.file,"audio")),this._ismobileaudio=!0,this._media.load("managanapics/blankpic.png","picture")):this._media.load(this.path+
c.file,c.type):this._media.load(this.path+c.file,c.type):this._feeds.isFeed(c.ffeedtype,c.ffeed)&&(this._feeds.isReady(c.ffeedtype,c.ffeed)?parseInt(c.file)<this._feeds.length(c.ffeedtype,c.ffeed)&&(d=this._feeds.getPost(c.ffeedtype,c.ffeed,parseInt(c.file)),null!=d&&d.ready&&(this._ismobile?"video"==c.type?(this._showicon&&(this._videoicon.visible=!0),this._media.load(this._thumbfile(d.getField(c.ffeedfield)),"picture"),this.instance.action="SYSTEM->loadMobileVideo->"+this._media.getPreferredFile(this.path+
c.file,"video"),this._currentAction="SYSTEM->loadMobileVideo->"+this._media.getPreferredFile(this.path+c.file,"video")):"audio"==c.type?(this._parser.run("SYSTEM->loadMobileAudio->"+this._media.getPreferredFile(this.path+c.file,"audio")),this._ismobileaudio=!0,this._media.load("managanapics/blankpic.png","picture")):this._media.load(d.getField(c.ffeedfield),c.type):this._media.load(d.getField(c.ffeedfield),c.type))):(this._feeds.addEventListener("ready",this._onFeedReady.bind(this)),this._feeds.addEventListener("error",
this._onFeedError.bind(this)))));return!0}}return!1};a._checkAction=function(a){""==this.instance.action&&(null!=this._playlist&&null!=this.instance&&null!=this.instance.id&&null!=this._playlist.getElement(this.element)&&void 0!=this._playlist.getElement(this.element).actions["t"+a])&&("button"==this._playlist.getElement(this.element).actions["t"+a].type?this._currentAction=this._playlist.getElement(this.element).actions["t"+a].code:"do"==this._playlist.getElement(this.element).actions["t"+a].type&&
"remove"!=this.state&&this._parser.run(this._playlist.getElement(element).getAction(a).code));""==this._currentAction?this._mouseover&&(this._media.hasEventListener("click")&&this._media.removeEventListener("click",this._onMediaClick.bind(this)),this._mouseover=!1,this.cursor=null):this._mouseover||(this._media.hasEventListener("click")||this._media.addEventListener("click",this._onMediaClick.bind(this)),this._mouseover=!0,this.cursor="pointer")};a.endTween=function(){for(var a in this._tween)"transition"!=
a&&"time"!=a&&"onComplete"!=a&&"onCompleteParams"!=a&&"onUpdate"!=a&&"onUpdateParams"!=a&&null!=this[a]&&(this[a]=this._tween[a]),0!=this.rotation&&359<this.rotation&&(this.rotation-=360),delete this._tween[a]};a.tweenObject=function(a){a=a||0;for(var c in this._tween)delete this._tween[c];this._tween={};this.px!=this.toX&&(this._tween.px=this.toX);this.py!=this.toY&&(this._tween.py=this.toY);this.pz!=this.toZ&&(this._tween.pz=this.toZ);this.order!=this.toOrder&&(this._tween.order=this.toOrder);this.rotation!=
this.toRZ&&(this.toRZ<this.rotation&&(this.toRZ+=360),this._tween.rotation=this.toRZ);this.width!=this.toWidth&&(this._tween.width=this.toWidth);this.height!=this.toHeight&&(this._tween.height=this.toHeight);this.alpha!=this.toAlpha&&(this._tween.alpha=this.toAlpha);this.volume!=this.toVolume&&(this._tween.volume=this.toVolume);if(0<a){this._tween.px=null!=this._tween.px?this._tween.px+4*a*(Math.random()-0.5):this.px+4*a*(Math.random()-0.5);this._tween.py=null!=this._tween.py?this._tween.py+4*a*(Math.random()-
0.5):this.py+4*a*(Math.random()-0.5);this._tween.width=null!=this._tween.width?this._tween.width+4*a*(Math.random()-0.5):this.width+4*a*(Math.random()-0.5);this._tween.height=null!=this._tween.height?this._tween.height+4*a*(Math.random()-0.5):this.height+4*a*(Math.random()-0.5);for(var d in this._force)switch(d){case "x":this._tween.px=int(this._force[d]);break;case "y":this._tween.py=int(this._force[d]);break;case "z":this._tween.pz=int(this._force[d]);break;case "order":this._tween.order=int(this._force[d]);
break;case "rz":this._tween.rotation=int(this._force[d]);break;case "width":this._tween.width=int(this._force[d]);break;case "height":this._tween.height=int(this._force[d]);break;case "alpha":this._tween.alpha=Number(this._force[d]);break;case "volume":this._tween.volume=int(this._force[d])}}return this._tween};a.toString=function(){return""==this.src?"[Object managana.ManaganaImage with no content loaded]":"[Object managana.ManaganaImage loaded with "+this.src+"]"};a.kill=function(){this.removeAllChildren();
this._media.removeEventListener("load",this._onMediaLoad.bind(this));this._media.removeEventListener("error",this._onMediaError.bind(this));this._media.removeEventListener("ended",this._onMediaEnded.bind(this));this._media.removeEventListener("update",this._onMediaUpdate.bind(this));this._media.removeEventListener("click",this._onMediaClick.bind(this));this._feeds.removeEventListener("ready",this._onFeedReady.bind(this));this._feeds.removeEventListener("error",this._onFeedError.bind(this));this._ismobileaudio&&
this._parser.run("SYSTEM->loadMobileAudio->dispose");this._showicon=this._ismobile=this._ismobileaudio=null;this._media.kill();this._volume=this._hheight=this._hwidth=this._y=this._x=this._height=this._width=this._media=null;this._mask.graphics.clear();this._feeds=this._parser=this._mouseover=this._element=this._playlist=this._force=this.instance=this.state=this._mask=null;delete this.src;delete this.oWidth;delete this.oHeight;delete this.type;delete this.px;delete this.py;delete this.pz;delete this.width;
delete this.height;delete this.element;delete this.volume;delete this.subtitleVisible;delete this.time;delete this.totalTime;delete this.mediaState;delete this.font;delete this.size;delete this.bold;delete this.italic;delete this.color;delete this.align;delete this.mode;delete this.alpha;this.superInitialize=null};a._onMediaClick=function(a){null!=this._parser&&this._parser.run(this._currentAction)};a._onMediaLoad=function(){this.dispatchEvent("load")};a._onMediaError=function(){this.dispatchEvent("error")};
a._onMediaEnded=function(){null!=this._playlist&&(this._parser.run(this._playlist.getElement(this.element).endAction),"loop"==this._playlist.getElement(this.element).end?(this._media.seek(0),this._media.play()):"next"==this._playlist.getElement(this.element).end?(delete this._force.element,this.element=this._playlist.getNextElement(this._element),this._force.element=this.element):"previous"==this._playlist.getElement(this.element).end&&(delete this._force.element,this.element=this._playlist.getPreviousElement(this._element),
this._force.element=this.element));this.dispatchEvent("ended")};a._onMediaUpdate=function(){this._checkAction(this._media.time);this.dispatchEvent("update")};a._onFeedError=function(a){var c=this._playlist.getElement(this._element);a.target.name==c.ffeed&&a.target.type==c.ffeedtype&&(this._feeds.removeEventListener("ready",this._onFeedReady.bind(this)),this._feeds.removeEventListener("error",this._onFeedError.bind(this)))};a._onFeedReady=function(a){var c=this._playlist.getElement(this._element);
a.target.name==c.ffeed&&a.target.type==c.ffeedtype&&(this._feeds.removeEventListener("ready",this._onFeedReady.bind(this)),this._feeds.removeEventListener("error",this._onFeedError.bind(this)),parseInt(c.file)<this._feeds.length(a.target.type,a.target.name)&&(a=this._feeds.getPost(a.target.type,a.target.name,parseInt(c.file)),null!=a&&a.ready&&("text"==c.type?this._media.load(this._maxchars(this._noHTML(a.getField(c.ffeedfield))),"text"):"paragraph"==c.type?this._media.load(this._maxchars(this._noHTML(a.getField(c.ffeedfield))),
"text"):this._ismobile?"video"==c.type?(this._showicon&&(this._videoicon.visible=!0),this._media.load(this._thumbfile(a.getField(c.ffeedfield)),"picture"),this.instance.action="SYSTEM->loadMobileVideo->"+this._media.getPreferredFile(a.getField(c.ffeedfield),"video"),this._currentAction="SYSTEM->loadMobileVideo->"+this._media.getPreferredFile(a.getField(c.ffeedfield),"video")):"audio"==c.type?(this._parser.run("SYSTEM->loadMobileAudio->"+this._media.getPreferredFile(this.path+c.file,"audio")),this._ismobileaudio=
!0,this._media.load("managanapics/blankpic.png","picture")):this._media.load(a.getField(c.ffeedfield),c.type):this._media.load(a.getField(c.ffeedfield),c.type))))};a._noHTML=function(a){a=a.split("<br />").join("\r\n");a=a.split("<br>").join("\r\n");a=a.split("<BR>").join("\r\n");a=a.split("<BR />").join("\r\n");a=a.split("</P>").join("\r\n");a=a.split("</p>").join("\r\n");return a=a.replace(/<\/?[a-z][a-z0-9]*[^<>]*>/ig,"")};a._maxchars=function(a){0<this.instance.charmax&&a.length>this.instance.charmax&&
(a=a.substr(0,this.instance.charmax)+"\u2026");return a};a._thumbfile=function(a){var c=a.split(".");1<c.length&&(a=a.substring(0,a.length-c[c.length-1].length),a+="png");return a};managana.ManaganaImage=e})();this.managana=this.managana||{};
(function(){var e=function(a){this.initialize(a)},a=e.prototype;a._groups=null;a._player=null;a._hold=null;a._codelines=null;a._ifState=null;a._pcodeSend=null;a._pcodeHold=null;a.strValues="";Object.defineProperty(a,"strValues",{get:function(){return this._groups.CODE.strValues},set:function(a){this._groups.CODE.strValues=a}});a.numValues="";Object.defineProperty(a,"numValues",{get:function(){return this._groups.CODE.numValues},set:function(a){this._groups.CODE.numValues=a}});a.comValues="";Object.defineProperty(a,
"comValues",{get:function(){return this._groups.CODE.comValues},set:function(a){this._groups.CODE.comValues=a}});a.initialize=function(a){this._player=a;this._groups=[];this._groups.STREAM=new managana.ParserSTREAM(a);this._groups.MESSAGE=new managana.ParserMESSAGE(a);this._groups.INSTANCE=new managana.ParserINSTANCE(a);this._groups.COMMUNITY=new managana.ParserCOMMUNITY(a);this._groups.SYSTEM=new managana.ParserSYSTEM(a);this._groups.CODE=new managana.ParserCODE(a,this);this._codelines=[];this._hold=
[];this._ifState="noif";this._pcodeSend=!1;this._pcodeHold=[]};a.addHold=function(a){if(1<this._codelines.length)for(this._codelines.shift(),this._hold.push({time:a,action:this._codelines.join("|")});0<this._codelines.length;)this._codelines.shift()};a.clearTimers=function(){for(;0<this._hold.length;)this._hold[0].action=null,this._hold.shift()};a.update=function(){if(0<this._hold.length){for(var a=[],c=0;c<this._hold.length;c++)this._hold[c].time--,0>=this._hold[c].time&&(this.run(this._hold[c].action),
a.push(c));if(0<a.length)for(a.reverse();0<a.length;)this._hold.splice(a[0],1),a.shift()}};a.setIf=function(a){switch(a){case "true":this._ifState="true";break;case "false":this._ifState="false";break;default:this._ifState="noif"}};a.elseState=function(){"true"==this._ifState?this._ifState="false":"false"==this._ifState&&(this._ifState="true")};a.checkCode=function(a){var c=!0;if(null!=a&&void 0!=a)for(a=a.split("|");0<a.length;){if(0<a[0].trim().length){var d=a[0].trim().split("->");2>d.length?c=
!1:null==this._groups[d[0]]||void 0==this._groups[d[0]]?c=!1:!1==this._groups[d[0]].check(d)&&(c=!1)}a.shift()}else c=!1;return c};a.run=function(a){if(""!=a&&this.checkCode(a)){for(;0<this._codelines.length;)this._codelines.shift();for(this._codelines=a.split("|");0<this._codelines.length;){a=0;if(0<this._codelines[0].trim().length)if("MESSAGE->startPCodeSend"==this._codelines[0].trim()&&(this._pcodeSend=!0),"MESSAGE->endPCodeSend"==this._codelines[0].trim()&&this.sendPCode(),this._pcodeSend)"MESSAGE->startPCodeSend"!=
this._codelines[0].trim()&&"MESSAGE->endPCodeSend"!=this._codelines[0].trim()&&this._pcodeHold.push(this._codelines[0].trim());else{var c=this._codelines[0].trim().split("->");if(2<c.length)for(a=2;a<c.length;a++)c[a]=this._groups.CODE.checkVar(c[a]);("noif"==this._ifState||"true"==this._ifState||"CODE"==c[0]&&"else"==c[1]||"CODE"==c[0]&&"endIf"==c[1])&&this._groups[c[0]].run(c)}0<this._codelines.length&&this._codelines.shift()}this._ifState="noif";this.sendPCode();return!0}return!1};a.sendPCode=
function(){if(this._pcodeSend){for(;0<this._pcodeHold.length;)this._pcodeHold.shift();this._pcodeSend=!1}};managana.ManaganaParser=e})();this.managana=this.managana||{};
(function(){var e=function(a,c,d){this.initialize(a,c,d)},a=e.prototype=new createjs.Container;a.READERKEY="managana";a.READERMETHOD="POST";a.READERENDING=".php";a.config=null;a._community=null;a.ismobile=!1;a._showicon=!0;a._currKeyframe=null;a._streamData=null;a._streamSprite=null;a._streamImage=null;a._aspect="landscape";a._bg=null;a._bgWidth=0;a._bgHeight=0;a._mask=null;a._cWidth=0;a._cHeight=0;a._ready=!1;a._tweentime=null;a._tweenmethod=null;a._loading=!0;a._keyfcount=0;a._playing=!1;a._history=
null;a._historyStep=0;a.transition=null;a._transitions=null;a.nextKeyframe=-1;a.parser=null;a._loader=null;a.openhtmlbox=null;a.openmvideobox=null;a.openmaudiobox=null;a._time=0;a._timeInt=-1;a._totaltime=0;a.interf=null;a.feeds=null;a.feedurl=null;a.playing=!1;Object.defineProperty(a,"playing",{get:function(){return this._playing}});a.owidth=0;Object.defineProperty(a,"owidth",{get:function(){return this._bgWidth}});a.oheight=0;Object.defineProperty(a,"oheight",{get:function(){return this._bgHeight}});
a.width=0;Object.defineProperty(a,"width",{get:function(){return this._bgWidth*this.scaleX},set:function(a){this.scaleX=a/this._bgWidth}});a.height=0;Object.defineProperty(a,"height",{get:function(){return this._bgHeight*this.scaleY},set:function(a){this.scaleY=a/this._bgHeight}});a.type="web";Object.defineProperty(a,"type",{get:function(){return"web"}});a.currentCommunity=null;Object.defineProperty(a,"currentCommunity",{get:function(){return this._community.id}});a.currentCommunityTitle=null;Object.defineProperty(a,
"currentCommunityTitle",{get:function(){return this._community.title}});a.currentCommunityBGColor="#000000";Object.defineProperty(a,"currentCommunityBGColor",{get:function(){return this._community.background}});a.currentStream=null;Object.defineProperty(a,"currentStream",{get:function(){return null!=this._streamData.main?this._streamData.main.id:""}});a.currentStreamTitle=null;Object.defineProperty(a,"currentStreamTitle",{get:function(){return null!=this._streamData.main?this._streamData.main.title:
""}});a.shareurl=null;Object.defineProperty(a,"shareurl",{get:function(){return this.config.server+"share"+this.READERENDING}});a.remoteStream=null;Object.defineProperty(a,"remoteStream",{get:function(){return null!=this._streamData.main?""!=this._streamData.main.remoteid?this._streamData.main.remoteid:this.currentStream:""}});a.currentStreamAbout=null;Object.defineProperty(a,"currentStreamAbout",{get:function(){return null!=this._streamData.main?this._streamData.main.about:""}});a.streamCategory=
null;Object.defineProperty(a,"streamCategory",{get:function(){return null!=this._streamData.main?this._streamData.main.category:""}});a.streamHasXNext=!1;Object.defineProperty(a,"streamHasXNext",{get:function(){return""!=this._streamData.main.navigation.xnext}});a.streamHasXPrev=!1;Object.defineProperty(a,"streamHasXPrev",{get:function(){return""!=this._streamData.main.navigation.xprev}});a.streamHasYNext=!1;Object.defineProperty(a,"streamHasYNext",{get:function(){return""!=this._streamData.main.navigation.ynext}});
a.streamHasYPrev=!1;Object.defineProperty(a,"streamHasYPrev",{get:function(){return""!=this._streamData.main.navigation.yprev}});a.streamHasZNext=!1;Object.defineProperty(a,"streamHasZNext",{get:function(){return""!=this._streamData.main.navigation.znext}});a.streamHasZPrev=!1;Object.defineProperty(a,"streamHasZPrev",{get:function(){return""!=this._streamData.main.navigation.zprev}});a.usrLogged=!1;Object.defineProperty(a,"usrLogged",{get:function(){return!1}});a.time=0;Object.defineProperty(a,"time",
{get:function(){return 0>this._totaltime?null!=this._streamImage[this._streamData.main.votereference]?this._streamImage[this._streamData.main.votereference].time:this._time:this._time}});a.totalTime=0;Object.defineProperty(a,"totalTime",{get:function(){return 0>this._totaltime?null!=this._streamImage.main[this._streamData.main.votereference]?this._streamImage.main[this._streamData.main.votereference].totalTime:0:this._totaltime}});a.lowerGuideVisible=!0;Object.defineProperty(a,"lowerGuideVisible",
{get:function(){return this._streamSprite.down.visible},set:function(a){this._streamSprite.down.visible=a}});a.upperGuideVisible=!0;Object.defineProperty(a,"upperGuideVisible",{get:function(){return this._streamSprite.up.visible},set:function(a){this._streamSprite.up.visible=a}});a.mainLayerVisible=!0;Object.defineProperty(a,"mainLayerVisible",{get:function(){return this._streamSprite.main.visible},set:function(a){this._streamSprite.main.visible=a}});a.superInitialize=a.initialize;a.initialize=function(a,
c,d){this.superInitialize();this._ready=!1;this.ismobile=c;this._showicon=d;this._loader=new ciclope.URLLoader;this._community=a;this._community.addEventListener("clearupstream",this._onClearUpStream.bind(this));this._community.addEventListener("cleardownstream",this._onClearDownStream.bind(this));this._streamData=[];this._streamData.down=this._community.downstream;this._streamData.main=this._community.mainstream;this._streamData.up=this._community.upstream;this._bg=new createjs.Shape;this._mask=
new createjs.Shape;this._bg.mask=this._mask;this.addChild(this._bg);this._currKeyframe=[];this._currKeyframe.down=0;this._currKeyframe.main=0;this._currKeyframe.up=0;this._streamSprite=[];this._streamSprite.down=new createjs.Container;this._streamSprite.down.mask=this._mask;this.addChild(this._streamSprite.down);this._streamSprite.main=new createjs.Container;this._streamSprite.main.mask=this._mask;this.addChild(this._streamSprite.main);this._streamSprite.up=new createjs.Container;this._streamSprite.up.mask=
this._mask;this.addChild(this._streamSprite.up);this._streamImage=[];this._streamImage.down=[];this._streamImage.main=[];this._streamImage.up=[];this.transition="";this._transitions=[];this._transitions.center=new managana.TransitionCENTER;this._transitions.none=new managana.TransitionNONE;this._transitions.target=new managana.TransitionTARGET;this._transitions.swipeleft=new managana.TransitionSWIPELEFT;this._transitions.swiperight=new managana.TransitionSWIPERIGHT;this._transitions.swipeup=new managana.TransitionSWIPEUP;
this._transitions.swipedown=new managana.TransitionSWIPEDOWN;this._transitions.fromleft=new managana.TransitionFROMLEFT;this._transitions.fromright=new managana.TransitionFROMRIGHT;this._transitions.fromup=new managana.TransitionFROMUP;this._transitions.fromdown=new managana.TransitionFROMDOWN;for(var e in this._transitions)"portrait"==this._aspect?(this._transitions[e].width=this._community.pwidth,this._transitions[e].height=this._community.pheight):(this._transitions[e].width=this._community.swidth,
this._transitions[e].height=this._community.sheight);this._tweentime=[];this._tweentime.down=1;this._tweentime.main=1;this._tweentime.up=1;this._tweenmethod=[];this._tweenmethod.down="linear";this._tweenmethod.main="linear";this._tweenmethod.up="linear";this._loading=!0;this._keyfcount=0;this._playing=!1;this._time=0;this._timeInt=setInterval(this._onTimer.bind(this),1E3);this._history=[];this._historyStep=0;this.feedurl="";this.feeds=new managana.ManaganaFeed};a.setFeedURL=function(a){a.substr(-this.READERENDING.length)!=
this.READERENDING&&(a+=this.READERENDING);this.feedurl=a;this.feeds.feedurl=a};a.setAspect=function(a){this._aspect=a;this._streamData.main.setAspect(a);this._streamData.up.setAspect(a);this._streamData.down.setAspect(a);for(var c in this._transitions)this._transitions[c].width=this._community.swidth,this._transitions[c].height=this._community.sheight;this.redraw()};a.getImage=function(a){var c=null,d;for(d in this._streamImage.main)d==a&&(c=this._streamImage.main[d]);if(null==c)for(d in this._streamImage.down)d==
a&&(c=this._streamImage.down[d]);if(null==c)for(d in this._streamImage.up)d==a&&(c=this._streamImage.up[d]);return c};a.pause=function(){for(var a in this._streamImage.down)this._streamImage.down[a].pause();for(a in this._streamImage.main)this._streamImage.main[a].pause();for(a in this._streamImage.up)this._streamImage.up[a].pause();this._playing=!1};a.play=function(){for(var a in this._streamImage.down)this._streamImage.down[a].play();for(a in this._streamImage.main)this._streamImage.main[a].play();
for(a in this._streamImage.up)this._streamImage.up[a].play();this._playing=!0};a.navigateTo=function(a){var c=!1;""!=this._streamData.main.navigation[a]&&(this.transition=this._community.navTransition[a],a=this._streamData.main.navigation[a].split("|"),1==a.length?(this.loadStream(a[0]),c=!0):0<a.length&&(this.loadStream(a[Math.round(Math.random()*(a.length-1))]),c=!0));return c};a.send=function(a,c){switch(c){case "savedata":this._saveData("cnum_"+this._community.id,this.parser.numValues);this._saveData("cstr_"+
this._community.id,this.parser.strValues);break;case "loaddata":this.parser.numValues=this._loadData("cnum_"+this._community.id);this.parser.strValues=this._loadData("cstr_"+this._community.id);break;case "loadcomvalues":var d=[];d.push("key="+this.READERKEY);d.push("ac=getcomvalues");d.push("varCom="+encodeURI(this._community.id));this._loader.load("reader"+this.READERENDING,this._onLoadComValues.bind(this),!1,!0,this.READERMETHOD,d);break;case "savecomvalue":d=[];d.push("key="+this.READERKEY);d.push("ac=savecomvalue");
d.push("varCom="+encodeURI(this._community.id));d.push("varName="+encodeURIComponent(a.varName));d.push("varValue="+encodeURIComponent(a.varValue));this._loader.load("reader"+this.READERENDING,null,!1,!1,this.READERMETHOD,d);break;case "changecomvalue":d=[];d.push("key="+this.READERKEY);d.push("ac=changecomvalue");d.push("varCom="+encodeURI(this._community.id));d.push("varName="+encodeURIComponent(a.varName));d.push("varValue="+encodeURIComponent(a.varValue));d.push("varAction="+encodeURIComponent(a.varAction));
this._loader.load("reader"+this.READERENDING,null,!1,!1,this.READERMETHOD,d);break;case "openurl":case "share":window.open(a.value,"_blank");break;case "htmlbox":null!=this.openhtmlbox&&this.openhtmlbox(a)}};a._onLoadComValues=function(a){if(a&&null!=this._loader.xml)if(null!=this._loader.xml.variable&&void 0!=this._loader.xml.variable)if(this._loader.xml.variable instanceof Array){a=[];for(var c=0;c<this._loader.xml.variable.length;c++)a.push(this._loader.xml.variable[c].name+"="+encodeURIComponent(this._loader.xml.variable[c].value));
this.parser.comValues=a.join("&")}else this.parser.comValues=this._loader.xml.variable.name+"="+encodeURIComponent(this._loader.xml.variable.value);else this.parser.comValues=""};a._saveData=function(a,c){return"localStorage"in window&&null!==window.localStorage?(window.localStorage.setItem(a,c),!0):!1};a._loadData=function(a){return"localStorage"in window&&null!==window.localStorage?window.localStorage.getItem(a):""};a.communityReady=function(){this.feeds.clear();for(var a=0;a<this._community.feeds.length;a++)this.feeds.addFeed(this._community.feeds[a].type,
this._noSpecial(this._community.feeds[a].name),this._community.feeds[a].reference,this._community.id);for(var c in this._transitions)this._transitions[c].width=this._community.swidth,this._transitions[c].height=this._community.sheight;this._ready=!0;this.redraw()};a.streamReady=function(a){this._tweentime[a.level]=a.speed;this._tweenmethod[a.level]=a.tweening;for(var c in this._streamImage)for(var d in this._streamImage[c])this._streamImage[c][d].unforceAll();this._loadKeyframe(0,a.level);this._stopTweens(a.level);
this._startTweens(a.level);this._playing=!0;this.parser.run(a.ipcode);if("main"==a.level){this._totaltime=this._time=0;null==a.votetype?this._totaltime=0:"defined"==a.votetype?this._totaltime=parseInt(a.votereference):"instance"==a.votetype&&(this._totaltime=-1);if(0==this._history.length)this._history.push([this._community.id,a.id]),this._historyStep=0;else if(this._historyStep==this._history.length-1)10<=this._history.length&&this._history.shift(),this._history.push([this._community.id,a.id]),this._historyStep=
this._history.length-1;else{if(this._history[this._historyStep+1][1]!=a.id||this._history[this._historyStep+1][0]!=this._community.id)this._history.splice(this._historyStep+1),this._history.push([this._community.id,a.id]);this._historyStep++}this.interf.hideWaiting()}};a.hasHistoryBack=function(){return 0<this._historyStep};a.hasHistoryNext=function(){return this._historyStep<this._history.length-1};a.historyBack=function(){return this.hasHistoryBack()?(this._historyStep-=2,this._history[this._historyStep+
1][0]==this._community.id?this.loadStream(this._history[this._historyStep+1][1]):(this._community.startStream=this._history[this._historyStep+1][1],this.loadCommunity(this._history[this._historyStep+1][0])),!0):!1};a.historyNext=function(){return this.hasHistoryNext()?(this._history[this._historyStep+1][0]==this._community.id?this.loadStream(this._history[this._historyStep+1][1]):(this._community.startStream=this._history[this._historyStep+1][1],this.loadCommunity(this._history[this._historyStep+
1][0])),!0):!1};a.setStartStream=function(a){this._community.startStream=a};a.isMeta=function(a){return null!=this._streamData.main.meta[a]};a.getMeta=function(a){return this._streamData.main.meta[a]};a.runCustomFunction=function(a){if(null!=this._streamData.main)switch(a){case "A":case "a":this.parser.run(this._streamData.main.customA);break;case "B":case "b":this.parser.run(this._streamData.main.customB);break;case "C":case "c":this.parser.run(this._streamData.main.customC);break;case "D":case "d":this.parser.run(this._streamData.main.customD)}};
a.mouseWheelUp=function(){this.parser.run(this._streamData.main.mouseup)};a.mouseWheelDown=function(){this.parser.run(this._streamData.main.mousedown)};a.playlistReady=function(a){for(var c in this._streamImage)for(var d in this._streamImage[c])this._streamImage[c][d].checkPlaylist(a)};a.loadStream=function(a){return this._streamData.main.load(a)?(this.interf.showWaiting(),!0):!1};a.loadCommunity=function(a){return this._community.load(a)?(this.interf.showWaiting(),!0):!1};a.home=function(){this.loadStream(this._community.home)};
a.loadMobileVideo=function(a){null!=this.openmvideobox&&this.openmvideobox(a)};a.loadMobileAudio=function(a){null!=this.openmaudiobox&&this.openmaudiobox(a)};a.redraw=function(a,c){null!=a&&(this._cWidth=a);null!=c&&(this._cHeight=c);if(this._ready){this._bg.graphics.clear();this._mask.graphics.clear();this._bg.graphics.beginFill(this._community.background).drawRect(0,0,this._community.swidth,this._community.sheight);this._mask.graphics.beginFill(this._community.background).drawRect(0,0,this._community.swidth,
this._community.sheight);this._bgWidth=this._community.swidth;this._bgHeight=this._community.sheight;var d=this._cWidth/this._bgWidth,e=this._cHeight/this._bgHeight;this.scaleY=d>e?this.scaleX=e:this.scaleX=d;this.x=(this._cWidth-this.width)/2;this.y=(this._cHeight-this.height)/2}};a._stopTweens=function(a){for(var c in this._streamImage[a])createjs.Tween.hasActiveTweens(this._streamImage[a][c])&&(createjs.Tween.removeTweens(this._streamImage[a][c]),this._streamImage[a][c].endTween())};a._startTweens=
function(a){var c=!1,d=Math.round(this._tweentime[a]+2*this._streamData[a].entropy*(Math.random()-0.5));0>=d&&(d=1);for(var e in this._streamImage[a])c?createjs.Tween.get(this._streamImage[a][e]).to(this._streamImage[a][e].tweenObject(this._streamData[a].distortion),1E3*d):(createjs.Tween.get(this._streamImage[a][e]).to(this._streamImage[a][e].tweenObject(this._streamData[a].distortion),1E3*d).call(this._streamTweenFinish.bind(this),[a]),c=!0)};a._streamTweenFinish=function(a){zSort(this._streamSprite[a]);
this._stopTweens(a);for(var c in this._streamImage[a])"remove"==this._streamImage[a][c].state&&(this._streamSprite[a].removeChild(this._streamImage[a][c]),this._streamImage[a][c].removeEventListener("ended",this._onInstanceEnd.bind(this)),this._streamImage[a][c].kill(),delete this._streamImage[a][c]);c=this._currKeyframe[a]+1;c>=this._streamData[a].keyframes.length&&(c=0);this.parser.run(this._streamData[a].keyframes[this._currKeyframe[a]].actionout);this._loadKeyframe(c,a);this._startTweens(a)};
a._loadKeyframe=function(a,c){"main"==c&&0<=this.nextKeyframe&&(a=this.nextKeyframe,this.nextKeyframe=-1);var d=this._streamData[c].fade;null==this.transition?d=this._streamData[c].fade:""!=this.transition&&(d=this.transition);for(var e in this._streamImage[c])this._streamImage[c][e].state="remove";if(null!=this._streamData[c].keyframes[a]&&0<this._streamData[c].keyframes[a].instances.length)for(var f=0;f<this._streamData[c].keyframes[a].instances.length;f++){var g=this._streamData[c].keyframes[a].instances[f];
null==this._streamImage[c][g.id]?(this._streamImage[c][g.id]=new managana.ManaganaImage(g,"community/"+this._community.id+".dis/",this.parser,this.feeds,this.ismobile,this._showicon),this._streamImage[c][g.id].addEventListener("ended",this._onInstanceEnd.bind(this)),this._streamSprite[c].addChild(this._streamImage[c][g.id]),null!=this._community.playlists[g.playlist]&&this._community.playlists[g.playlist].ready&&this._streamImage[c][g.id].checkPlaylist(this._community.playlists[g.playlist]),null!=
this._transitions[d]?this._transitions[d].setIN(this._streamImage[c][g.id]):this._streamImage[c][g.id].alpha=0,this._streamImage[c][g.id].volume=0):(this._streamImage[c][g.id].state="play",this._streamImage[c][g.id].newInstance(g),null!=this._community.playlists[g.playlist]&&this._community.playlists[g.playlist].ready&&this._streamImage[c][g.id].checkPlaylist(this._community.playlists[g.playlist]))}for(e in this._streamImage[c])"remove"==this._streamImage[c][e].state&&(null!=this._transitions[d]?
this._transitions[d].setOUT(this._streamImage[c][e]):this._streamImage[c][e].toAlpha=0,this._streamImage[c][e].toVolume=0);this._currKeyframe[c]=a;this.parser.run(this._streamData[c].keyframes[this._currKeyframe[c]].actionin);this._keyfcount++;zSort(this._streamSprite[c])};a._onInstanceEnd=function(a){};a._onClearUpStream=function(){for(var a in this._streamSprite.up)this._streamSprite.up.removeChild(this._streamImage.up[a]);for(a in this._streamImage.up)this._streamImage.up[a].kill(),delete this._streamImage.up[a]};
a._onClearDownStream=function(){for(var a in this._streamSprite.down)this._streamSprite.down.removeChild(this._streamImage.down[a]);for(a in this._streamImage.down)this._streamImage.down[a].kill(),delete this._streamImage.down[a]};a._onTimer=function(){if(this._playing){this._time++;if(0<this.totalTime)if(this.time>=this.totalTime){for(var a=[],c=1;9>=c;c++)""!=this._streamData.main.voteoptions["v"+c].code&&a.push(this._streamData.main.voteoptions["v"+c].code);0<a.length&&this.parser.run(a[Math.round(Math.random()*
(a.length-1))]);this.dispatchEvent("ended")}else this.dispatchEvent("update");else this.dispatchEvent("update");this.parser.update()}null!=this.interf&&this.interf.update()};a._noSpecial=function(a){a=a.trim();for(var c="",d=0;d<a.length;d++)" "==a.charAt(d)&&(c+="_"),c="."==a.charAt(d)?c+".":a.charAt(d)==encodeURIComponent(a.charAt(d))?c+a.charAt(d):c+"_";return c};managana.ManaganaPlayer=e})();this.managana=this.managana||{};
(function(){var e=function(a,c,d){this.initialize(a,c,d)},a=e.prototype;a._config=null;a._mainButton=null;a._waiting=null;a._timeButton=null;a._timeHolder=null;a._currentTime=null;a._totalTime=null;a._mainBar=null;a._logo=null;a._play=null;a._pause=null;a._player=null;a._fullscreen=null;a._facebook=null;a._gplus=null;a._twitter=null;a._plusButton=null;a._minusButton=null;a._homeButton=null;a._plusMenu=null;a._plusHolder=null;a._holder=null;a.initialize=function(a,c,d){this._holder=a;this._config=
c;this._player=d;this._player.interf=this;this._mainButton=document.createElement("div");this._mainButton.style.width=Math.round(60)+"px";this._mainButton.style.height=Math.round(60)+"px";this._mainButton.style.left=Math.round(5)+"px";this._mainButton.style.top=Math.round(5)+"px";this._mainButton.style.backgroundColor="#737373";this._mainButton.style.display="block";this._mainButton.style.position="absolute";this._mainButton.style.borderRadius=Math.round(10)+"px";this._mainButton.style.opacity=0.5;
this._holder.appendChild(this._mainButton);this._mainBar=document.createElement("div");this._mainBar.style.width=Math.round(this._holder.offsetWidth-10)+"px";this._mainBar.style.height=Math.round(60)+"px";this._mainBar.style.left=Math.round(5)+"px";this._mainBar.style.top=Math.round(5)+"px";this._mainBar.style.backgroundColor="#7D7D7D";this._mainBar.style.display="none";this._mainBar.style.position="absolute";this._mainBar.style.borderRadius=Math.round(10)+"px";this._mainBar.style.opacity=0.5;this._holder.appendChild(this._mainBar);
this._logo=document.createElement("img");this._logo.style.width="50px";this._logo.style.height="50px";this._logo.style.left="10px";this._logo.style.top="10px";this._logo.style.display="block";this._logo.style.position="absolute";this._logo.style.cursor="pointer";this._logo.onclick=this._onLogoClick.bind(this);this._logo.src=null==this._config.icon||""==this._config.icon?"managanapics/logo.png":"pics/"+this._config.icon;this._holder.appendChild(this._logo);this._timeButton=document.createElement("div");
this._timeButton.style.width=Math.round(100)+"px";this._timeButton.style.height=Math.round(60)+"px";this._timeButton.style.right=Math.round(5)+"px";this._timeButton.style.top=Math.round(5)+"px";this._timeButton.style.backgroundColor="#737373";this._timeButton.style.display="block";this._timeButton.style.position="absolute";this._timeButton.style.borderRadius=Math.round(10)+"px";this._timeButton.style.opacity=0.5;this._holder.appendChild(this._timeButton);this._timeHolder=document.createElement("div");
this._timeHolder.style.width=Math.round(100)+"px";this._timeHolder.style.height=Math.round(60)+"px";this._timeHolder.style.right=Math.round(5)+"px";this._timeHolder.style.top=Math.round(5)+"px";this._timeHolder.style.display="block";this._timeHolder.style.position="absolute";this._timeHolder.style.cursor="pointer";this._timeHolder.onclick=this._onTimeClick.bind(this);this._holder.appendChild(this._timeHolder);this._waiting=document.createElement("img");this._waiting.style.width=Math.round(50)+"px";
this._waiting.style.height=Math.round(50)+"px";this._waiting.style.left=Math.round((parseInt(this._timeHolder.style.width)-parseInt(this._waiting.style.width))/2)+"px";this._waiting.style.top=Math.round((parseInt(this._timeHolder.style.height)-parseInt(this._waiting.style.height))/2)+"px";this._waiting.style.display="none";this._waiting.style.position="absolute";this._waiting.src="managanapics/waiting.gif";this._timeHolder.appendChild(this._waiting);this._currentTime=document.createElement("div");
this._currentTime.style.width="75%";this._currentTime.style.height="70%";this._currentTime.style.right="0px";this._currentTime.style.top="0px";this._currentTime.style.display="block";this._currentTime.style.position="absolute";this._currentTime.style.color="#FFFFFF";this._currentTime.style.fontSize=Math.round(16)+"px";this._currentTime.style.textAlign="center";this._currentTime.style.fontFamily="Verdana, Geneva, sans-serif";this._currentTime.innerHTML="0:00";this._timeHolder.appendChild(this._currentTime);
this._currentTime.style.lineHeight=this._currentTime.offsetHeight+"px";this._totalTime=document.createElement("div");this._totalTime.style.width="75%";this._totalTime.style.height="30%";this._totalTime.style.right="0px";this._totalTime.style.top=Math.round(3*this._currentTime.offsetHeight/4)+"px";this._totalTime.style.display="block";this._totalTime.style.position="absolute";this._totalTime.style.color="#FFFFFF";this._totalTime.style.fontSize=Math.round(11)+"px";this._totalTime.style.textAlign="center";
this._totalTime.style.fontFamily="Verdana, Geneva, sans-serif";this._totalTime.innerHTML="0:00";this._timeHolder.appendChild(this._totalTime);this._play=document.createElement("img");this._play.style.width=Math.round(16)+"px";this._play.style.height=Math.round(16)+"px";this._play.style.left=Math.round(8)+"px";this._play.style.top=Math.round((this._timeHolder.offsetHeight-16)/2)+"px";this._play.style.display="block";this._play.style.position="absolute";this._play.src="managanapics/buttonplay.png";
this._timeHolder.appendChild(this._play);this._pause=document.createElement("img");this._pause.style.width=Math.round(16)+"px";this._pause.style.height=Math.round(16)+"px";this._pause.style.left=Math.round(8)+"px";this._pause.style.top=Math.round((this._timeHolder.offsetHeight-16)/2)+"px";this._pause.style.display="none";this._pause.style.position="absolute";this._pause.src="managanapics/buttonpause.png";this._timeHolder.appendChild(this._pause);this._homeButton=document.createElement("img");this._homeButton.style.width=
"50px";this._homeButton.style.height="50px";this._homeButton.style.top="10px";this._homeButton.style.display="none";this._homeButton.style.position="absolute";this._homeButton.style.cursor="pointer";this._homeButton.onclick=this._onHomeClick.bind(this);this._homeButton.src="managanapics/buttonhome.png";this._holder.appendChild(this._homeButton);this._fullscreen=document.createElement("img");this._fullscreen.style.width="50px";this._fullscreen.style.height="50px";this._fullscreen.style.top="10px";
this._fullscreen.style.display="none";this._fullscreen.style.position="absolute";this._fullscreen.style.cursor="pointer";this._fullscreen.onclick=this._onFullscreenClick.bind(this);this._fullscreen.src="managanapics/buttonfullscreen.png";this._holder.appendChild(this._fullscreen);this._plusButton=document.createElement("img");this._plusButton.style.width="50px";this._plusButton.style.height="50px";this._plusButton.style.top="10px";this._plusButton.style.display="none";this._plusButton.style.position=
"absolute";this._plusButton.style.cursor="pointer";this._plusButton.onclick=this._onPlusClick.bind(this);this._plusButton.src="managanapics/buttonplus.png";this._holder.appendChild(this._plusButton);this._minusButton=document.createElement("img");this._minusButton.style.width="50px";this._minusButton.style.height="50px";this._minusButton.style.top="10px";this._minusButton.style.display="none";this._minusButton.style.position="absolute";this._minusButton.style.cursor="pointer";this._minusButton.onclick=
this._onPlusClick.bind(this);this._minusButton.src="managanapics/buttonminus.png";this._holder.appendChild(this._minusButton);this._plusMenu=document.createElement("div");this._plusMenu.style.width=Math.round(190)+"px";this._plusMenu.style.height=Math.round(70)+"px";this._plusMenu.style.top=parseInt(this._mainBar.style.height)+Math.round(10)+"px";this._plusMenu.style.backgroundColor="#737373";this._plusMenu.style.display="none";this._plusMenu.style.position="absolute";this._plusMenu.style.borderRadius=
Math.round(10)+"px";this._plusMenu.style.opacity=0.5;this._holder.appendChild(this._plusMenu);this._plusHolder=document.createElement("div");this._plusHolder.style.width=parseInt(this._plusMenu.style.width)+"px";this._plusHolder.style.height=parseInt(this._plusMenu.style.height)+"px";this._plusHolder.style.top=parseInt(this._plusMenu.style.top)+"px";this._plusHolder.style.display="none";this._plusHolder.style.position="absolute";this._holder.appendChild(this._plusHolder);this._facebook=document.createElement("img");
this._facebook.style.width="50px";this._facebook.style.height="50px";this._facebook.style.left="10px";this._facebook.style.top="10px";this._facebook.style.display="block";this._facebook.style.position="absolute";this._facebook.style.cursor="pointer";this._facebook.onclick=this._onFacebookClick.bind(this);this._facebook.src="managanapics/buttonfacebook.png";this._plusHolder.appendChild(this._facebook);this._twitter=document.createElement("img");this._twitter.style.width="50px";this._twitter.style.height=
"50px";this._twitter.style.left=parseInt(this._facebook.style.left)+parseInt(this._facebook.style.width)+10+"px";this._twitter.style.top="10px";this._twitter.style.display="block";this._twitter.style.position="absolute";this._twitter.style.cursor="pointer";this._twitter.onclick=this._onTwitterClick.bind(this);this._twitter.src="managanapics/buttontwitter.png";this._plusHolder.appendChild(this._twitter);this._gplus=document.createElement("img");this._gplus.style.width="50px";this._gplus.style.height=
"50px";this._gplus.style.left=parseInt(this._twitter.style.left)+parseInt(this._twitter.style.width)+10+"px";this._gplus.style.top="10px";this._gplus.style.display="block";this._gplus.style.position="absolute";this._gplus.style.cursor="pointer";this._gplus.onclick=this._onGPlusClick.bind(this);this._gplus.src="managanapics/buttongplus.png";this._plusHolder.appendChild(this._gplus);this.redraw()};a.show=function(){this._holder.appendChild(this._mainButton);this._holder.appendChild(this._mainBar);this._holder.appendChild(this._logo);
this._holder.appendChild(this._timeButton);this._holder.appendChild(this._timeHolder);this._holder.appendChild(this._homeButton);this._holder.appendChild(this._fullscreen);this._holder.appendChild(this._plusButton);this._holder.appendChild(this._minusButton);this._holder.appendChild(this._plusMenu);this._holder.appendChild(this._plusHolder)};a.hide=function(){this._holder.removeChild(this._mainButton);this._holder.removeChild(this._mainBar);this._holder.removeChild(this._logo);this._holder.removeChild(this._timeButton);
this._holder.removeChild(this._timeHolder);this._holder.removeChild(this._homeButton);this._holder.removeChild(this._fullscreen);this._holder.removeChild(this._plusButton);this._holder.removeChild(this._minusButton);this._holder.removeChild(this._plusMenu);this._holder.removeChild(this._plusHolder)};a.redraw=function(){this._mainBar.style.width=Math.round(this._holder.offsetWidth-10*(window.devicePixelRatio||1))+"px";var a=(parseInt(this._mainBar.style.width)-parseInt(this._mainButton.style.width)-
parseInt(this._timeButton.style.width)-parseInt(this._homeButton.style.width)-parseInt(this._fullscreen.style.width)-parseInt(this._plusButton.style.width))/4;this._homeButton.style.left=Math.round(parseInt(this._mainButton.style.left)+parseInt(this._mainButton.style.width)+a+parseInt(this._homeButton.style.width)/2)+"px";this._fullscreen.style.left=Math.round(parseInt(this._homeButton.style.left)+parseInt(this._homeButton.style.width)/2+a+parseInt(this._fullscreen.style.width)/2)+"px";this._plusButton.style.left=
Math.round(parseInt(this._fullscreen.style.left)+parseInt(this._fullscreen.style.width)/2+a+parseInt(this._plusButton.style.width)/2)+"px";this._minusButton.style.left=parseInt(this._plusButton.style.left)+"px";this._plusMenu.style.left=Math.round(parseInt(this._plusButton.style.left)+parseInt(this._plusButton.style.width)/2-parseInt(this._plusMenu.style.width)/2)+"px";this._plusHolder.style.left=parseInt(this._plusMenu.style.left)+"px"};a.update=function(){"none"==this._waiting.style.display&&(this._player.playing?
(this._play.style.display="none",this._pause.style.display="block",0==this._player.totalTime?(this._totalTime.style.display="none",this._currentTime.style.height="100%",this._totalTime.innerHTML="0:00"):(this._currentTime.style.height="70%",this._totalTime.style.display="block",this._totalTime.innerHTML=this._parseSeconds(this._player.totalTime)),this._currentTime.style.lineHeight=this._currentTime.offsetHeight+"px",this._currentTime.innerHTML=this._parseSeconds(this._player.time),this._timeHolder.style.opacity=
1):(this._play.style.display="block",this._pause.style.display="none",this._timeHolder.style.opacity=0.75))};a.showWaiting=function(){this._waiting.style.display="block";this._currentTime.style.display="none";this._totalTime.style.display="none";this._play.style.display="none";this._pause.style.display="none"};a.hideWaiting=function(){this._waiting.style.display="none";this._currentTime.style.display="block";this._totalTime.style.display="block";this._player.playing?this._pause.style.display="block":
this._play.style.display="block"};a._onLogoClick=function(){"none"==this._mainButton.style.display?(this._mainButton.style.display="block",this._timeButton.style.display="block",this._mainBar.style.display="none",this._fullscreen.style.display="none",this._plusButton.style.display="none",this._minusButton.style.display="none",this._homeButton.style.display="none",this._plusMenu.style.display="none",this._plusHolder.style.display="none"):(this._mainButton.style.display="none",this._timeButton.style.display=
"none",this._mainBar.style.display="block",this._fullscreen.style.display="block",this._plusButton.style.display="block",this._homeButton.style.display="block")};a._onTimeClick=function(){"none"==this._play.style.display?(this._player.pause(),this._play.style.display="block",this._pause.style.display="none",this._timeHolder.style.opacity=0.75):(this._player.play(),this._play.style.display="none",this._pause.style.display="block",this._timeHolder.style.opacity=1)};a._onHomeClick=function(){this._player.home()};
a._onFullscreenClick=function(){this._player.ismobile?(document.documentElement.scrollHeight<window.outerHeight/window.devicePixelRatio&&(document.documentElement.style.height=window.outerHeight/window.devicePixelRatio+"px"),setTimeout(window.scrollTo(1,1),0)):document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.webkitRequestFullScreen?document.documentElement.webkitRequestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():
document.documentElement.msRequestFullScreen&&document.documentElement.msRequestFullScreen()};a._onFacebookClick=function(){var a={};a.value="http://www.facebook.com/sharer.php?t="+encodeURIComponent(this._player.currentStreamTitle)+"&u="+encodeURIComponent(this._player.shareurl+"?c="+this._player.currentCommunity+"&s="+this._player.currentStream);a.community=this._player.currentCommunity;a.stream=this._player.currentStream;a.share=this._player.shareurl;this._player.send(a,"share")};a._onTwitterClick=
function(){var a={};a.value="https://twitter.com/intent/tweet?text="+encodeURIComponent(this._player.currentCommunityTitle+": "+this._player.currentStreamTitle)+"&url="+encodeURIComponent(this._player.shareurl+"?c="+this._player.currentCommunity+"&s="+this._player.currentStream);a.community=this._player.currentCommunity;a.stream=this._player.currentStream;a.share=this._player.shareurl;this._player.send(a,"share")};a._onGPlusClick=function(){var a={};a.value="https://plus.google.com/share?url="+encodeURIComponent(this._player.shareurl+
"?c="+this._player.currentCommunity+"&s="+this._player.currentStream);a.community=this._player.currentCommunity;a.stream=this._player.currentStream;a.share=this._player.shareurl;this._player.send(a,"share")};a._onPlusClick=function(){"none"==this._plusMenu.style.display?(this._plusMenu.style.display="block",this._plusHolder.style.display="block",this._plusButton.style.display="none",this._minusButton.style.display="block"):(this._plusMenu.style.display="none",this._plusHolder.style.display="none",
this._plusButton.style.display="block",this._minusButton.style.display="none")};a._parseSeconds=function(a){var c=Math.round(a%60),d=Math.floor(a%3600/60);a=Math.floor(a/3600);var e="";0<a&&(e+=a+":");e=0==d?e+"00:":10>d?e+("0"+d+":"):e+(d+":");return 0==c?e+"00":10>c?e+("0"+c):e+c};managana.ManaganaInterface=e})();this.managana=this.managana||{};
(function(){var e=function(a,c,d,e){this.initialize(a,c,d,e)},a=e.prototype=new createjs.EventDispatcher;a.config=null;a.allowKeyboard=!0;a._app=null;a._opt=null;a._ismobile=!1;a._showicon=!0;a._videodiv=null;a._audiodiv=null;a._community=null;a._div=null;a._aspect="landscape";a._player=null;a._framerate=15;a._wasPlaying=!0;a._divName=null;a._managanaCanvas=null;a._iframe=null;a._closeButton=null;a._closeAudio=null;a.superInitialize=a.initialize;a.initialize=function(a,c,d,e){this.superInitialize();
this._divName=a;this._opt=c||[];null!=d&&(this._ismobile=d);null!=e&&(this._showicon=e);"probably"!=document.createElement("video").canPlayType('video/mp4; codecs="avc1.4D401E, mp4a.40.2"')&&(this._ismobile=!0);this._div=document.getElementById(a);this._div.style.overflow="hidden";this._managanaCanvas=document.createElement("canvas");this._managanaCanvas.style.display="block";this._managanaCanvas.style.position="absolute";this._div.appendChild(this._managanaCanvas);this._iframe=document.createElement("iframe");
this._iframe.style.border="thin #000000";this._iframe.style.position="absolute";this._iframe.style.left="40px";this._iframe.style.top="40px";this._iframe.style.display="none";this._div.appendChild(this._iframe);this._closeButton=document.createElement("img");this._closeButton.style.display="none";this._closeButton.style.left="0px";this._closeButton.style.top="0px";this._closeButton.style.position="absolute";this._closeButton.style.cursor="pointer";this._closeButton.src="managanapics/closehtmlbox.png";
this._div.appendChild(this._closeButton);this._closeAudio=document.createElement("img");this._closeAudio.style.display="none";this._closeAudio.style.left="5px";this._closeAudio.style.bottom="5px";this._closeAudio.style.width="30px";this._closeAudio.style.height="30px";this._closeAudio.style.position="absolute";this._closeAudio.style.cursor="pointer";this._closeAudio.onclick=this.closeMAudioBox.bind(this);this._closeAudio.src="managanapics/closeaudio.png";this._div.appendChild(this._closeAudio);this._ismobile&&
(this._audiodiv=document.createElement("div"),this._audiodiv.style.position="absolute",this._audiodiv.style.left="0px",this._audiodiv.style.bottom="0px",this._audiodiv.style.width="10px",this._audiodiv.style.height="10px",this._audiodiv.style.display="none",this._div.appendChild(this._audiodiv),this._videodiv=document.createElement("div"),this._videodiv.style.border="thin #000000",this._videodiv.style.position="absolute",this._videodiv.style.left="40px",this._videodiv.style.top="40px",this._videodiv.style.backgroundColor=
"#000000",this._videodiv.style.display="none",this._div.appendChild(this._videodiv));this._app=new ciclope.CiclopeJS(this._managanaCanvas);this._app.stage.snapToPixelsEnabled=!0;this._app.setFPS(15);this._div.style.backgroundColor="#000000";window.addEventListener("resize",this._onResize.bind(this));this._community=new managana.DISCommunity;this._community.addEventListener("load",this._onCommunity.bind(this));this._community.addEventListener("streamload",this._onStreamLoad.bind(this));this._community.addEventListener("streamerror",
this._onStreamError.bind(this));this._community.addEventListener("playlistload",this._onPlaylistLoad.bind(this));this._community.addEventListener("playlisterror",this._onPlaylistError.bind(this));this._player=new managana.ManaganaPlayer(this._community,this._ismobile,this._showicon);this._app.stage.addChild(this._player);this._player.openhtmlbox=this.openHTMLBox.bind(this);this._player.openmvideobox=this.openMVideoBox.bind(this);this._player.openmaudiobox=this.openMAudioBox.bind(this);this._parser=
new managana.ManaganaParser(this._player);this._player.parser=this._parser;this.config=new managana.ConfigData(this._onConfig.bind(this))};a.load=function(a){return this._community.load(a)};a.openHTMLBox=function(a){this._framerate=this._app.fps;this._wasPlaying=this._player.playing;this._player.pause();this._app.setFPS(1);this._iframe.onload=this.checkHTMLBoxFrame.bind(this);this._iframe.style.width=this._managanaCanvas.offsetWidth-80+"px";this._iframe.style.height=this._managanaCanvas.offsetHeight-
80+"px";this._managanaCanvas.style.display="none";this._iframe.style.display="block";this._closeButton.style.display="block";this._iframe.src="community/"+this._player.currentCommunity+".dis/media/"+a.from+"/html/"+a.folder+"/index.html";this._closeButton.onclick=this.closeHTMLBox.bind(this);this._interface.hide()};a.openMVideoBox=function(a){this._ismobile&&(this._framerate=this._app.fps,this._wasPlaying=this._player.playing,this._player.pause(),this._app.setFPS(1),this._videodiv.style.width=this._managanaCanvas.offsetWidth-
80+"px",this._videodiv.style.height=this._managanaCanvas.offsetHeight-80+"px",this._managanaCanvas.style.display="none",this._videodiv.innerHTML='<video width="100%" height="100%" controls="" src="'+a+'" preload="auto"></video>',this._videodiv.style.display="block",this._closeButton.style.display="block",this._closeButton.onclick=this.closeMVideoBox.bind(this),this._interface.hide())};a.openMAudioBox=function(a){this._ismobile&&this._showicon&&("dispose"==a?this.closeMAudioBox():(this._audiodiv.innerHTML=
'<audio controls="" src="'+a+'" preload="auto" style="bottom:5px;left:40px;position:absolute;"></audio>',this._audiodiv.style.display="block",this._closeAudio.style.display="block"))};a.checkHTMLBoxFrame=function(){-1!=this._iframe.contentWindow.location.href.split("%7C").join("|").indexOf("|MANAGANACLOSE|")&&this.closeHTMLBox()};a.closeHTMLBox=function(){var a=this._iframe.contentWindow.location.href.split("%7C").join("|"),a=a.split("%3E").join(">");this._iframe.src="";this._iframe.style.display=
"none";this._managanaCanvas.style.display="block";this._closeButton.style.display="none";this._closeButton.onclick=null;this._app.setFPS(this._framerate);this._wasPlaying&&this._player.play();-1!=a.indexOf("|MANAGANACLOSE|")&&(a=a.split("|MANAGANACLOSE|"),1<a.length&&this._parser.run(a[1]));this._interface.show()};a.closeMVideoBox=function(){this._videodiv.innerHTML="";this._videodiv.style.display="none";this._managanaCanvas.style.display="block";this._closeButton.style.display="none";this._closeButton.onclick=
null;this._app.setFPS(this._framerate);this._wasPlaying&&this._player.play();this._interface.show()};a.closeMAudioBox=function(){this._audiodiv.innerHTML="";this._audiodiv.style.display="none";this._closeAudio.style.display="none"};a._onConfig=function(a){a?(null!=this._opt.server&&void 0!=this._opt.server&&(this.config.server=this._opt.server),this._player.config=this.config,this._player.setFeedURL(this.config.server+"feed"),null!=this._opt.stream&&void 0!=this._opt.stream&&(this._community.startStream=
this._opt.stream),null!=this._opt.community&&void 0!=this._opt.community?this._community.load(this._opt.community):this._community.load(this.config.community),this._onResize(),this._interface=new managana.ManaganaInterface(this._div,this.config,this._player),this._interface.showWaiting(),null!=this._opt.ui&&void 0!=this._opt.ui&&"false"==this._opt.ui&&this._interface.hide(),document.addEventListener("keydown",this._onKeydown.bind(this)),this._div.addEventListener("mousewheel",this._onMouseWheel.bind(this),
!1)):alert("System configuration error! Managana could not be initialized.")};a._onMouseWheel=function(a){0<a.wheelDelta?this._player.mouseWheelUp():this._player.mouseWheelDown()};a._onKeydown=function(a){switch(a.keyCode){case 65:this._player.runCustomFunction("a");break;case 66:this._player.runCustomFunction("b");break;case 67:this._player.runCustomFunction("c");break;case 68:this._player.runCustomFunction("d");break;case 37:this._player.navigateTo("xprev");break;case 38:this._player.navigateTo("ynext");
break;case 39:this._player.navigateTo("xnext");break;case 40:this._player.navigateTo("yprev");break;case 80:window.print();break;case 36:this._player.home();break;case 33:this._player.navigateTo("znext");break;case 34:this._player.navigateTo("zprev")}};a._onCommunity=function(){this._player.setAspect(this._aspect);this._player.communityReady()};a._onStreamLoad=function(a){this._player.streamReady(a.target)};a._onStreamError=function(a){console.log("stream load error "+a.target.level)};a._onPlaylistLoad=
function(a){this._player.playlistReady(a.target)};a._onPlaylistError=function(a){console.log("playlist load error "+a.target.id)};a._onResize=function(){this._app.canvas.width=this._div.offsetWidth;this._app.canvas.height=this._div.offsetHeight;this._aspect=this._app.canvas.width>this._app.canvas.height?"landscape":"portrait";this._player.setAspect(this._aspect);null!=this._interface&&this._interface.redraw();this._div.style.backgroundColor=null!=this._opt.bgcolor&&void 0!=this._opt.bgcolor?this._opt.bgcolor:
this.config.bgcolor;this._player.redraw(this._div.offsetWidth,this._div.offsetHeight)};managana.Managana=e})();
